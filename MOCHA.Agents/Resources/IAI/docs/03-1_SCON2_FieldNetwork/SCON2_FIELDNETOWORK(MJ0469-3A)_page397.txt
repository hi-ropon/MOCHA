ファイル名: SCON2_FIELDNETOWORK(MJ0469-3A)_page397

<overview>
本ページはMECHATROLINK-Ⅲの基本通信に関するコマンドステータスの説明で構成されています。ページ全体は以下のセクションに分かれています。
- テキスト部分：コマンドステータスの概要説明と各ビットの意味の詳細解説
- 表部分：コマンドステータスのビットごとの名称と内容をまとめた表、およびCMD_ALM（コマンドアラーム）の詳細状態を示す表
- グラフ部分：ビット配置を示す図（コマンドフォーマット第2、3バイトのビット割り当て図）
</overview>

<contents>
### テキスト
#### コマンドステータス
コマンドフォーマット第2、3バイトのビット割り当てについて説明しています。

### 図
```mermaid
flowchart LR
    subgraph コマンドフォーマット第3バイト
        CMD_STAT[CMD_STAT (ビット15)]
        COMM_ALM[COMM_ALM (ビット14〜12)]
        CMD_ALM[CMD_ALM (ビット11〜8)]
    end
    subgraph コマンドフォーマット第2バイト
        CMD_ID[CMD_ID (未使用) (ビット7〜6)]
        予約[予約 (ビット5)]
        ALM_CLR_CMP[ALM_CLR_CMP (ビット4)]
        CMD_RDY[CMD_RDY (ビット3)]
        D_WAR[D_WAR (ビット2)]
        D_ALM[D_ALM (ビット1)]
    end
    CMD_STAT --> COMM_ALM --> CMD_ALM --> CMD_ID --> 予約 --> ALM_CLR_CMP --> CMD_RDY --> D_WAR --> D_ALM
```

**図の説明:**
- コマンドフォーマット第3バイトはCMD_STAT、COMM_ALM、CMD_ALMのビットで構成
- コマンドフォーマット第2バイトはCMD_ID（未使用）、予約、ALM_CLR_CMP、CMD_RDY、D_WAR、D_ALMのビットで構成

### 表
#### コマンドステータスビット詳細

| ビット | 略称       | 名称                   | 内容                                                                                     |
|-------|------------|------------------------|------------------------------------------------------------------------------------------|
| 0     | D_ALM      | 機器アラーム           | コントローラがアラーム状態であることを示す。ビットが1の場合、サーボOFFとなる。           |
| 1     | D_WAR      | 機器ワーニング         | コントローラがワーニング状態であることを示す。ビットが1でもサーボ制御は可能。             |
| 2     | CMDRDY     | コマンドレディー       | 0の場合、コマンド処理実行中。DISCONNECTコマンド以外のコマンド入力は無視される。          |
| 3     | ALM_CLR_CMP| アラーム・ワーニングクリア実行完了 | CMD_CTRLのALM_CLRの実行完了を示す。ビットが1の場合、処理の実行完了。ただし実際のアラーム解除は別途確認が必要。 |
| 4,5   | -          | 予約                   | 予約ビット                                                                               |
| 6,7   | CMD_ID     | 未使用                 | 未使用                                                                                   |
| 8〜11 | CMD_ALM    | コマンドアラーム       | コマンドの異常を示す。正常コマンド受け付けで自動クリア。詳細は下表参照。                   |

#### CMD_ALM（コマンドアラーム）詳細

| コード (ビット8〜11) | 状態     | 内容               | 備考                                                                                   |
|---------------------|----------|--------------------|----------------------------------------------------------------------------------------|
| 0H                  | 正常     | 正常               |                                                                                        |
| 1H                  | ワーニング | データ範囲外       | ワーニングを通知し、動作可能な最大値に指令値を書き換えて動作を行う。                   |
| 8H                  | アラーム | 未サポートコマンド受信 |                                                                                        |
| 9H                  | アラーム | データ範囲外       |                                                                                        |
| AH                  | アラーム | コマンド実行条件異常 | アラームを通知。コマンドは実行しない。                                                |
| BH                  | アラーム | サブコマンド組合せ異常 |                                                                                        |
| CH                  | アラーム | フェーズ異常       |                                                                                        |
</contents>