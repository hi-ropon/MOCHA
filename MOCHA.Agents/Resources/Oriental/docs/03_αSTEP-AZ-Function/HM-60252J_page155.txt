ファイル名: HM-60252J_page155

<overview>
本ページは「タイミングチャート」と「パルスリクエスト機能」に関する説明で構成されています。  
テキスト部分ではタイミングチャートの動作手順と注意点、パルスリクエスト機能の概要が記載されています。  
図部分にはタイミングチャートの信号のON/OFF状態の時間関係を示す波形図が含まれています。  
表部分にはパルスリクエスト機能に関連するパラメータの名称、内容、初期値がまとめられています。
</overview>

<contents>
### テキスト
#### タイミングチャート
1. MON-REQ0入力またはMON-REQ1入力をONにすると、その瞬間に指令位置、検出位置、アラームコードが記録され、MON-OUT出力がONになる。  
2. MON-OUT出力がONになったことを確認し、クロック信号をMON-CLK入力に入力する。  
3. クロック信号に同期して、MON-OUT出力から「MON-REQ0対象設定」と「MON-REQ1対象設定」パラメータで設定した情報が出力される。  
4. 必要な情報が取得できたら、MON-REQ入力をOFFにする。データはLSBファーストで出力される。チェックサムを確認する必要がない場合は、出力を中断してもよい。  

※ MON-CLK入力のONエッジを検出してから、実際にMON-OUT出力の状態が確定するまでの時間がある。  
memo: MON-CLK入力に入力するクロック信号の周波数は最大500Hz。

#### パルスリクエスト機能
パルスリクエスト機能は、A相/B相出力を用いて現在位置（絶対位置）を上位システムに伝える機能。  
上位システムのエンコーダカウンタとドライバのA相/B相出力を接続し、パルスリクエスト機能を実行すると、ドライバの現在位置をA相/B相パルスとして出力可能。  
あらかじめ上位システムのエンコーダカウンタを「0」に設定しておくことで、ABZオフセットと上位システムの座標系を簡単に同期できる。

### 図
タイミングチャート（信号のON/OFF状態と時間関係）

```mermaid
flowchart TD
    A[MON-REQ0入力 ON] -->|1ms以下| B[MON-REQ1入力 OFF]
    B --> C[MON-CLK入力 ON/OFF パルス]
    C --> D[MON-OUT出力 ON/OFF 状態]
    D --> E[LSBファーストでデータ出力]
    E --> F[MSBまで出力]
    F --> G[MON-REQ入力 OFF]
```

**図の説明:**  
- MON-REQ0入力がONになるとMON-OUT出力がONになる。  
- MON-CLK入力にクロック信号を入力し、MON-OUT出力から設定情報がLSBファーストで順次出力される。  
- 出力完了後、MON-REQ入力をOFFにする。

### 表
#### パルスリクエスト機能関連パラメータ

| MEXE02ツリー表示 | パラメータ       | 内容                                                                                     | 初期値 |
| :---------------- | :--------------- | :--------------------------------------------------------------------------------------- | :----- |
| I/O動作・機能     | PLSOUT対象設定   | パルスリクエスト機能によって出力される情報を選択。<br>【設定範囲】<br>0: 指令位置(32bit)<br>1: 指令位置32bitカウンタ(32bit)<br>2: 検出位置(32bit)<br>3: 検出位置32bitカウンタ(32bit) | 0      |
|                   | PLSOUT最大周波数 | パルスリクエスト機能で出力するパルスの周波数を設定。<br>【設定範囲】1～10,000 (1=0.1kHz)                                         | 100    |
</contents>