ファイル名: HM-60252J_page262

<overview>
本ページは「レスポンス」に関する説明で構成されています。テキスト部分ではレスポンスの種類（正常応答、無応答、例外応答）について詳細に解説しています。表部分はレスポンスのメッセージ構成や伝送異常の原因、無応答の原因、例外応答のファンクションコード対応表が掲載されています。グラフや図はなく、文章と表による構成です。
</overview>

<contents>
### テキスト
#### 2-2 レスポンス
サーバーから返送されるレスポンスには、正常応答、無応答、および例外応答の3種類があります。レスポンスのメッセージ構成はクエリと同じです。

##### ■正常応答
クライアントからクエリを受信すると、サーバーは要求された処理を実行し、ファンクションコードに対応したレスポンスを返送します。

##### ■無応答
クライアントがクエリを送信しても、サーバーがレスポンスを返送しない場合があります。この状態を無応答といいます。無応答になる原因は以下の通りです。

- 伝送異常の場合  
  サーバーは伝送異常を検出するとクエリを破棄し、レスポンスは返送されません。

- 伝送異常ではない場合  
  伝送異常が検出されなくてもレスポンスを返送しない場合があります。

##### ■例外応答
サーバーがクエリで要求された処理を実行できないときに、例外応答を返送します。レスポンスには処理できない原因を示す例外コードが付加されます。

##### ■ファンクションコード
例外応答のファンクションコードは、クエリのファンクションコードに80hを加算した値になります。

---

### 表

#### レスポンスのメッセージ構成
| サーバーアドレス | ファンクションコード | データ | エラーチェック |
| :---: | :---: | :---: | :---: |
| 8ビット | 8ビット | N×8ビット | 16ビット |

#### 伝送異常の原因と内容
| 伝送異常の原因 | 内容 |
| :--- | :--- |
| フレーミングエラー | ストップビット0が検出されました。 |
| パリティエラー | 設定したパリティとの不一致が検出されました。 |
| CRC不一致 | CRC-16の計算値とエラーチェックが不一致でした。 |
| メッセージ長不正 | メッセージの長さが256バイトを超えました。 |

#### 無応答の原因と内容
| 原因 | 内容 |
| :--- | :--- |
| ブロードキャスト | ブロードキャストで通信している場合、要求された処理は実行しますが、レスポンスは返送しません。 |
| サーバーアドレス不一致 | クエリのサーバーアドレスとドライバのサーバーアドレスが一致していない場合。 |

#### 例外応答のメッセージ構成
| サーバーアドレス | ファンクションコード | 例外コード | エラーチェック |
| :---: | :---: | :---: | :---: |
| 8ビット | 8ビット | 8ビット | 16ビット |

#### ファンクションコード（クエリと例外応答の対応）
| クエリのファンクションコード | 例外応答 |
| :---: | :---: |
| 03h | 83h |
| 06h | 86h |
| 08h | 88h |
| 10h | 90h |
| 17h | 97h |
</contents>