ファイル名: HM-60252J_page263

<overview>
本ページはModbus RTU制御（RS-485通信）における例外応答の構成と例外コードの説明で構成されています。  
ページ全体は以下のセクションに分かれています。  
- テキスト部分：例外応答の概要説明、例外コードの意味と原因、サーバーエラー時の設定についての説明  
- 表部分：例外コードと通信エラーコード、原因、内容をまとめた表  
- 図部分：例外応答のクエリとレスポンスの構成を示す図  
グラフはなく、図は通信メッセージの構成を示すフロー図的なものです。
</overview>

<contents>
### テキスト
#### 例外応答の例
Modbus RTU通信における例外応答のメッセージ構成例を示しています。  
クエリとレスポンスの各フィールドの内容が具体的な16進数値で示されています。

#### 例外コード
処理できない原因を示す例外コードの一覧と詳細説明です。  
| 例外コード | 通信エラーコード | 原因           | 内容                                                                                   |
|------------|------------------|----------------|----------------------------------------------------------------------------------------|
| 01h        | 88h              | 不正ファンクション | ファンクションコードが不正なため実行できませんでした。<br>・未対応のファンクションコード<br>・診断(08h)のサブファンクションコードが00h以外 |
| 02h        | 88h              | 不正データアドレス | データアドレスが不正のため実行できませんでした。<br>・未対応のレジスタアドレス(0000h～57FFh以外)<br>・レジスタアドレスとレジスタ数の和が5800h以上 |
| 03h        | 8Ch              | 不正データ       | データが不正のため実行できませんでした。<br>・レジスタ数が0<br>・バイト数がレジスタ数×2以外の値<br>・データ長が範囲外               |
| 04h        | 89h 8Ah 8Ch 8Dh  | サーバーエラー   | サーバーでエラーが発生したため、実行できませんでした。<br>・ユーザーI/Fと通信中(89h)<br>・MEXE02でダウンロードまたは初期化中<br>・NVメモリ処理中(8Ah)<br>・内部処理中(SYS-BSYがON)<br>・EEPROM異常のアラームが発生中<br>・パラメータ設定範囲外(8Ch)<br>・ライト値が設定範囲外<br>・コマンド実行不可(8Dh) |

#### サーバーエラーについて
「サーバーエラー検出時応答(Modbus)」を「正常応答」に設定すると、サーバーエラーが発生しても正常応答で返信します。  
タッチパネルなど、例外応答を必要としない場合に設定してください。

### 図
```mermaid
flowchart LR
    クエリ -->|送信| レスポンス
    subgraph クエリ
        A1[サーバーアドレス 01h]
        A2[ファンクションコード 10h]
        A3[レジスタアドレス(上位) 02h]
        A4[レジスタアドレス(下位) 4Ch]
        A5[レジスタ数(上位) 00h]
        A6[レジスタ数(下位) 02h]
        A7[バイト数 04h]
        A8[レジスタアドレスのライト値(上位) 00h]
        A9[レジスタアドレスのライト値(下位) 00h]
        A10[レジスタアドレス+1のライト値(上位) 03h]
        A11[レジスタアドレス+1のライト値(下位) E9h]
        A12[エラーチェック(下位) 2Fh]
        A13[エラーチェック(上位) D4h]
    end
    subgraph レスポンス
        B1[サーバーアドレス 01h]
        B2[ファンクションコード 90h]
        B3[データ 例外コード 04h]
        B4[エラーチェック(下位) 4Dh]
        B5[エラーチェック(上位) C3h]
    end
```

**図の説明:**  
- クエリはサーバーアドレス、ファンクションコード、レジスタアドレス、レジスタ数、バイト数、ライト値、エラーチェックで構成される。  
- レスポンスはサーバーアドレス、ファンクションコード（エラーを示すため90hに変化）、例外コード、エラーチェックで構成される。

</contents>