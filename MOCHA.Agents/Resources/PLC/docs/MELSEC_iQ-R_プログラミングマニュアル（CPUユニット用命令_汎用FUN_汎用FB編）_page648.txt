ファイル名: MELSEC_iQ-R_プログラミングマニュアル（CPUユニット用命令_汎用FUN_汎用FB編）_page648

<overview>
このページは「ファイル操作命令」に関する注意事項とエラーコードの説明で構成されています。テキスト部分では、SP.FREAD命令の実行上の注意点やCSV形式変換読出し時のデータサイズ確保について記載されています。表部分では、SP.FREAD命令で発生する可能性のあるエラーコードとその内容が一覧で示されています。グラフや図は含まれていません。
</overview>

<contents>
### テキスト
#### 注意事項
- SP.FREAD命令は割込みプログラムで実行しないこと。割込みプログラムで実行すると誤動作の原因となる。
- CSV形式変換読出し時に複数の要素数を読み出す場合は、読み出しデータエリアに各要素の合計サイズ分のデバイスをあらかじめ確保してから命令を実行すること。読み出しデータは(d2)+1から格納されるため、(d2)として確保が必要なワード数は各要素の合計ワード数＋1ワードとなる。
- CSV形式変換読出しで文字列(アスキーデータ)指定時は、合計サイズ(ワード単位)を(d1)+3の最大読出しデータ数に設定すること。
  - 例：CSVファイルから1要素の文字数が100文字の文字列を100要素読み出す場合、(100文字＋2(NULL))×100要素＝10200バイト＝5100ワードとなるため、最大読出しデータ数((d1)+3)に5100を設定し、(d2)は5101ワード分の領域を確保する。
- SP.FREAD命令はファイル読出しが発生するため、命令実行時にスキャンタイムが延びることがある。

### 表
#### エラーコード一覧
| エラーコード (SD0) | 内容 |
|--------------------|------|
| 2820H | 読み出したデータのサイズが、読み出しデバイスサイズを超えた場合。 |
| 3405H | ドライブ指定(s1)によって指定されたドライブがSDメモリカード以外の場合。<br>コントロールデータ(d1)以降に設定された値が設定範囲外の場合。<br>・634ページ タイプ1<br>・636ページ タイプ2<br>(s2)で指定したファイル名文字列が読み出せない場合。<br>・指定したファイル名文字列の文字数が範囲を超えている。<br>・使用できない値を設定した。<br>・指定したファイル名文字列の末尾に区切り文字を指定した。<br>・634ページ タイプ1<br>・636ページ タイプ2 |
| 3427H | (d1)+0の実行/完了タイプと(d1)+7のデータタイプ指定が指定できない組合せの場合。<br>・634ページ タイプ1 |

- SP.FREAD命令が異常完了した場合、完了ステータス(d1)+1で指定したデバイスにエラーコードが格納される（命令が演算エラーの場合は格納されない）。
- 完了ステータス(d1)+1に格納されるエラーコードの詳細は687ページのファイル操作命令のエラーコードを参照。

</contents>