ファイル名: MELSEC_iQ-R_プログラミングマニュアル（CPUユニット用命令_汎用FUN_汎用FB編）_page1433

<overview>
本ページは「34.3 減算」についての説明で構成されています。ページ全体は以下のセクションに分かれています。
- テキスト部分：SUB(_E)関数の概要、入力値の差を出力する説明、引数の内容・種別・データ型の説明、機能の演算処理の説明。
- 図部分：ラダー、FBD/LD、ST言語での減算関数の使用例の図解。
- 表部分：引数の内容・種別・データ型の表、データ型ごとの演算結果の説明表。
- 図（例示）：INT型データの減算例を示す数値の図解。
全体として、減算関数SUB(_E)の使い方、引数の説明、演算処理の詳細、データ型ごとの動作例を示しています。
</overview>

<contents>
### テキスト
#### 34.3 減算 SUB(_E)
SUB(_E)は、入力値の差((s1)-(s2))を出力する関数です。

##### 対応CPU
RnCPU、RnENCPU、RnPCPU（プロセス、二重化、一般、安全）に対応しています。

##### 使用言語
ラダー、FBD/LD、STで使用可能です。

#### 引数の内容、種別、データ型
| 引数 | 内容 | 種別 | データ型 |
| :--- | :--- | :--- | :--- |
| EN | 実行条件(TRUE:実行、FALSE:停止) | 入力変数 | BOOL |
| s1(IN1), s2(IN2) | 入力値 | 入力変数 | ANY_NUM*1 |
| ENO | 出力状態(TRUE:正常、FALSE:異常) | 出力変数 | BOOL |
| d | 出力値 | 出力変数 | ANY_NUM*1 |

*1 安全プログラムではREAL型/LREAL型データは指定不可。指定するとエラーになる。

#### 機能
##### 演算処理
- (s1)、(s2)に入力されたINT型/DINT型/WORD型/DWORD型/REAL型/LREAL型データの減算((s1)-(s2))を行い、演算結果を(d)から(s)と同一のデータ型で出力します。
- 演算結果にアンダーフローやオーバーフローが発生した場合でもエラーにはならず、INT型の場合は以下のように出力されます。

##### 例：INT型データの減算
- (s1) = 12345、(s2) = 6789 の場合、(d) = 5556 となります。

##### アンダーフロー・オーバーフロー時の動作（INT型）
| データ型 | 内容 |
| :--- | :--- |
| INT型 | アンダーフローおよびオーバーフローが発生しても演算エラーになりません。SUB_Eの場合、ENOからTRUEが出力されます。<br>【例1】<br>32767 - (2) = 32767<br>(7FFFH) - (FFFEH) = (8001H)<br>最上位ビットが1になるため負の値となる。<br>【例2】<br>-32767 - 2 = 32766<br>(8000H) - (0002H) = (7FFEH)<br>最上位ビットが0になるため正の値となる。 |

### 図
#### ラダー、FBD/LDでのSUB(_E)使用例
- EN/ENOなしの場合：s1、s2の2つの入力からdへ差を出力するシンプルなブロック。
- EN/ENO付きの場合：EN入力、ENO出力が追加され、s1、s2の入力からdへ差を出力。

#### ST言語での使用例
- EN/ENOなし：d := SUB(s1,s2);
- EN/ENO付き：d := SUB_E(EN,ENO,s1,s2);

### 表
#### 引数の説明表
| 引数 | 内容 | 種別 | データ型 |
| :--- | :--- | :--- | :--- |
| EN | 実行条件(TRUE:実行、FALSE:停止) | 入力変数 | BOOL |
| s1(IN1), s2(IN2) | 入力 | 入力変数 | ANY_NUM*1 |
| ENO | 出力状態(TRUE:正常、FALSE:異常) | 出力変数 | BOOL |
| d | 出力 | 出力変数 | ANY_NUM*1 |

*1 安全プログラムではREAL型/LREAL型データは指定不可。

#### データ型ごとの動作説明表（INT型例）
| データ型 | 内容 |
| :--- | :--- |
| INT型 | アンダーフロー・オーバーフローが発生しても演算エラーにならず、SUB_Eの場合はENOからTRUEが出力される。具体例として32767-(2)は負の値となり、-32767-(2)は正の値となる。 |

</contents>