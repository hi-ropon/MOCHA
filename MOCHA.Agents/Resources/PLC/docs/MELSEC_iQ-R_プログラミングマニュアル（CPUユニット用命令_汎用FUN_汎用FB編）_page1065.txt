ファイル名: MELSEC_iQ-R_プログラミングマニュアル（CPUユニット用命令_汎用FUN_汎用FB編）_page1065

<overview>
このページは、CPUユニット内蔵データベースアクセス機能の一部である「DBROLLBAK(P)命令」について説明しています。ページ構成は以下の通りです。
- テキスト部分：DBROLLBAK(P)命令の機能説明、注意事項、エラーに関する説明
- 図部分：DBROLLBAK(P)命令実行時の完了デバイスの動作を示すタイミングチャート
- 表部分：エラーコードとその内容をまとめた表
</overview>

<contents>
### テキスト
#### 機能
- (s)で指定した識別番号に対するデータベースでのロールバックを実行する。
- 正常に完了すると、完了デバイス(d1)の完了信号がONになり、(d2)の完了ステータスに0が格納される。
- DBROLLBAK(P)命令実行時の完了デバイスの動作は図の通り。
- 実行中はSM753（ファイルアクセス中）がONとなり、SM753がON中はDBROLLBAK(P)命令は実行不可。実行した場合は無処理となる。ただし、データベースアクセス命令実行中は異常完了する。
- CPUユニットのユニットパラメータで「内蔵データベースアクセス使用有無」を“使用する”に設定している場合、SM1498（内蔵データベース起動完了フラグ）がOFFの間はDBROLLBAK(P)命令は実行不可。実行した場合は無処理となる。
- SM753、SM1498に対応したファームウェアバージョンは、特殊リレー一覧を参照。

#### 注意事項
以下の場合、完了デバイス(d1)+1の異常完了信号がONになり、(d2)の完了ステータスにエラーコードが格納される。
- データベースアクセス命令実行中にDBROLLBAK(P)命令を実行した場合
- 範囲外の識別番号を設定した場合
- トランザクションがない状態でDBROLLBAK(P)命令を実行した場合
- (s)でオープンしていない識別番号を指定した場合

### 図
- DBROLLBAK(P)命令実行時の完了デバイス(d1)と(d1)+1の動作を示すタイミングチャート。
- 命令開始時は完了デバイス(d1)と(d1)+1はOFF。
- ロールバック実行中は(d1)がONになり、異常完了時は(d1)+1もONになる。
- 命令終了時に完了デバイス(d1)がONのまま保持される。

### 表
| エラーコード (SD0) | 内容                                   |
|--------------------|--------------------------------------|
| 2820H              | (d1)で指定した範囲が、該当デバイス/ラベルを超える場合。 |

- オペランドの完了ステータスに格納されるエラーコードについては、1066ページのデータベースアクセス命令で発生するエラーコードを参照。
</contents>