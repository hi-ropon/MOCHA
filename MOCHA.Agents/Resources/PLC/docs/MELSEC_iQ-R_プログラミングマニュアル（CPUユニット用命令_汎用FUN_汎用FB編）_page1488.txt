ファイル名: MELSEC_iQ-R_プログラミングマニュアル（CPUユニット用命令_汎用FUN_汎用FB編）_page1488

<overview>
本ページは「40.2 減算」についての説明で構成されています。ページ全体は以下のセクションに分かれています。
- テキスト部分：SUB_TIME(_E)関数の概要、入力値の説明、機能説明、演算処理の詳細
- 表部分：設定データ（引数の内容、種別、データ型）を表形式で整理
- 図部分：ラダー、FBD/LD、STでの使用例の回路図、及び演算例の時間データの差分計算を示す図解
</overview>

<contents>
### テキスト
#### 40.2 減算 SUB_TIME(_E)
SUB_TIME(_E)は、TIME型の入力値の差((s1)-(s2))を計算し、その結果を出力します。

##### 対応CPU
RnCPU、RnENCPU（プロセス、二重化）、RnPSFCPU（一般、安全）に対応しています。

##### 入力値
- s1, s2：TIME型の入力値
- EN：実行条件（TRUEで実行、FALSEで停止）
- ENO：出力状態（TRUEが正常、FALSEが異常）
- d：出力（TIME型）

##### 使用例（ラダー、FBD/LD、ST）
- ラダー、FBD/LDではEN/ENOの有無による回路図が示されています。
- STではEN/ENOなしの場合はd:=SUB_TIME(s1,s2)、ありの場合はd:=SUB_TIME_E(EN,ENO,s1,s2)と記述。

### 表
#### 設定データ（引数、内容、種別、データ型）

| 引数          | 内容                          | 種別     | データ型 |
|---------------|-------------------------------|----------|----------|
| EN            | 実行条件(TRUE:実行、FALSE:停止) | 入力変数 | BOOL     |
| s1(IN1), s2(IN2) | 入力                         | 入力変数 | TIME     |
| ENO           | 出力状態(TRUE:正常、FALSE:異常) | 出力変数 | BOOL     |
| d             | 出力                          | 出力変数 | TIME     |

### 機能
#### 演算処理
- (s1)、(s2)に入力されたTIME型データの減算((s1)-(s2))を行い、演算結果をTIME型で出力(d)します。
- 演算結果にアンダーフローやオーバーフローが発生しても演算エラーにはならず、結果はそのまま出力されます。
- SUB_TIME_Eの場合、出力変数ENOからTRUEが出力されます。

### 図・例
#### 演算例1
- (s1) = T#1d2h33m44s55ms（1日2時間33分44秒55ミリ秒）
- (s2) = T#2ms（2ミリ秒）
- 演算結果(d) = T#1d2h33m44s53ms

#### 演算例2（オーバーフロー）
- (s1) = T#24d20h31m23s647ms（7FFFFFFFH）
- (s2) = T#-2ms（FFFFFFFEH）
- 演算結果(d) = T#-24d20h31m23s647ms（80000001H）
- 最上位ビットが1になるため、負の時間となる。

#### 演算例3（アンダーフロー）
- (s1) = T#-24d20h31m23s648ms（80000000H）
- (s2) = T#2ms（00000002H）
- 演算結果(d) = T#24d20h31m23s646ms（7FFFFFFEH）
- 最上位ビットが0になるため、正の時間となる。
</contents>