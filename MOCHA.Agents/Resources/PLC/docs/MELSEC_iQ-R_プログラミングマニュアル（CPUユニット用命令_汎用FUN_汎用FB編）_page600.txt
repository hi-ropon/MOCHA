ファイル名: MELSEC_iQ-R_プログラミングマニュアル（CPUユニット用命令_汎用FUN_汎用FB編）_page600

<overview>
このページは、サブルーチンプログラムの動作例を示すテキスト説明とラダープログラムの図、さらにサブルーチン実行時のデバイス値の変化を示す表形式の図解、注意事項のテキスト、及びエラーコードとその内容をまとめた表で構成されています。テキスト部分は動作説明と注意事項、表部分はエラーコード一覧、図部分はラダープログラムの回路図とデバイス値の変化を示す図解です。
</overview>

<contents>
### テキスト
#### サブルーチンプログラムの動作例
正しい演算でサブルーチンプログラムのFD0にD0を指定し、サブルーチンプログラムでD4を使用した場合の動作を説明しています。

#### 注意事項
- FBD/LDプログラムはサブルーチンプログラムとして作成できません。
- FBD/LDでは、引数を持つサブルーチンプログラムの実行はできません。

### 図
#### ラダープログラム例
- M0がONのとき、XCALL命令でP0プログラムのD0を呼び出す。
- P0プログラム内で、K100をK3で割った値をFD0に格納し、その後K100とD4の和を計算し、RET命令で戻る。

#### サブルーチン実行時のデバイス値の変化
- サブルーチンプログラム実行前のD0～D4の値とFD0の不定値。
- XCALL命令実行直後はD0～D4の値は変わらず、FD0は不定値。
- サブルーチンプログラム実行時はD4に100がセットされ、FD0に33,1,100,1000が格納される。
- RET命令実行後はD0に33、D1に1、D2に100、D3に1000が転送され、D4は100のまま。FD0は不定値に戻る。

### 表
#### エラーコード(SD0)一覧
| エラーコード | 内容 |
| :--- | :--- |
| 2820H | (s1)～(s5)で引数に指定したデバイスがデータサイズ分確保できないとき。 |
| 3360H | 17項目のネスティングが実行されたとき。 |
| 3380H | (P)で指定したポインタのサブルーチンプログラムが存在しないとき。 |
| 3381H | XCALL命令実行後、RET命令を実行する前にEND命令、FEND命令、GOEND命令、STOP命令を実行したとき。 |
| 3382H | XCALL命令を実行する前にRET命令を実行したとき。 |
</contents>