ファイル名: MELSEC_iQ-R_プログラミングマニュアル（CPUユニット用命令_汎用FUN_汎用FB編）_page1165

<overview>
このページは、内蔵Ethernet機能用のソケット通信命令に関する説明で構成されています。ページ全体は以下のセクションに分かれています。
- テキスト部分：コントロールデータの説明、TCP通信に関する注意点、機能概要の説明。
- 表部分：オペランド(s2)および(s3)のコントロールデータの詳細を表形式で示している。
- 図部分：CPUユニットから相手機器へ送信データを送る流れを示したブロック図。
</overview>

<contents>
### テキスト
#### コントロールデータ
- オペランド(s2)と(s3)に関するコントロールデータの説明がある。
- (s2)では、+0がシステムエリア（内容なし）、+1が完了ステータス（命令完了時に完了ステータスを格納。0000Hは正常完了、それ以外は異常完了＝エラーコード）。
- (s3)では、+0が送信データ長（バイト数、1～10238の範囲）、+1～+ロが送信データ（バイト単位で下位バイト側から順に送信。奇数バイトの場合は最終データの格納エリアの下位バイトに格納）。

#### TCP通信に関する注意点
- 送信データ長は相手機器の最大ウィンドウサイズ（TCPの受信バッファ）以下に設定する必要がある。
- 最大ウィンドウサイズを超えるデータ送信はできない。

#### 機能
- (s1)で指定したコネクションの相手機器へ、(s3)で設定したデータを送信する。
- SP.SOCSND命令の実行および正常/異常完了は、設定データで指定した完了デバイス(d)と完了時の状態表示デバイス(d)+1で確認可能。
- 完了デバイス(d)は、SP.SOCSND命令完了時にスキャンのEND処理でON、次のEND処理でOFFになる。
- 状態表示デバイス(d)+1は、命令完了時の状態によりON/OFFが切り替わる。正常完了時はOFFのまま、異常完了時はスキャンのEND処理でON、次のEND処理でOFFになる。

### 図
- CPUユニット内の(s3)+0に送信データ長、(s3)+1以降に送信データが格納されている。
- これらのデータがSP.SOCSND命令によって相手機器へ送信される流れを示す。
- 図はCPUユニットの送信データ領域から矢印で相手機器へデータ送信される様子を表している。

### 表
#### オペランド(s2)のコントロールデータ
| デバイス | 項目       | 内容                                                                 | 設定範囲 | セット側 |
| :------- | :--------- | :------------------------------------------------------------------- | :------- | :------- |
| +0       | システムエリア | ―                                                                   | ―        | ―        |
| +1       | 完了ステータス | 命令完了時に完了ステータスを格納。0000Hは正常完了、0000H以外は異常完了（エラーコード） | ―        | システム |

#### オペランド(s3)のコントロールデータ
| デバイス | 項目         | 内容                                                                                     | 設定範囲   | セット側 |
| :------- | :----------- | :--------------------------------------------------------------------------------------- | :--------- | :------- |
| +0       | 送信データ長 | 送信データ長を指定（バイト数）                                                           | 1～10238   | ユーザ   |
| +1～+ロ  | 送信データ   | 送信データを指定。バイト単位で下位バイト側から順に送信。奇数バイトの場合は最終データの格納エリアの下位バイトに格納 | ―          | ユーザ   |

</contents>