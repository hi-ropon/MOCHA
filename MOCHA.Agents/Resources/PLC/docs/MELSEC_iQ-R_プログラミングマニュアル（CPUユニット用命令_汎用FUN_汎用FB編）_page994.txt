ファイル名: MELSEC_iQ-R_プログラミングマニュアル（CPUユニット用命令_汎用FUN_汎用FB編）_page994

<overview>
本ページは「ファイルレジスタ操作命令」に関する説明で構成されています。ページ全体は以下のセクションに分かれています。
- テキスト部分：機能説明、注意事項、ポイントの解説
- 図部分：ファイルレジスタに対する処理の概念図
- 表部分：エラーコードとその内容の一覧表
グラフは含まれていません。
</overview>

<contents>
### テキスト
#### 機能
プログラム中で使用するファイルレジスタのファイル名を、指定したデバイスに格納されているファイル名に変更します。ファイル名を変更後は、プログラムで使用しているすべてのファイルレジスタは変更後のファイル名のブロックNo.00のファイルレジスタを対象に処理されます。ブロックNo.の切換えはRSET(P)命令で実行します。

- ドライブNo.は1または3が指定可能。
- ドライブ1を指定した場合はドライブ3として動作し、SD614（デバイス/ラベルメモリ（ドライブ3）使用状況）に反映されるが、SD604（SDメモリカード（ドライブ2）使用状況）には反映されない。
- ファイル名に拡張子（.QDR）を指定する必要はない。
- パラメータでドライブNo.ファイル名を指定しても、QDRSET(P)命令で指定されたファイル名が優先される。

#### Point
- QDRSET(P)命令でファイル名を変更しても、CPUユニットのSTOP→RUN操作でパラメータ設定のファイル名に戻る。
- CPUユニットをSTOP→RUNしたときも、QDRSET(P)命令で変更したファイル名にする場合は、STOP→RUN時に1スキャンONするSM402（RUN後1スキャンのみON）を使用し、QDRSET(P)命令を実行すること。
- リフレッシュデバイスにファイルレジスタが指定された場合は、QDRSET(P)命令でファイルレジスタのファイル名を変更しないこと。

#### 注意事項
- ファイル名にNULLコード（0000H）を指定しても設定は解除されず無処理となる。
- ファイルレジスタの制約事項は別ページ（64ページ）を参照。

### 図
「ファイルレジスタに対する処理」の概念図が示されている。
- ファイル名の切替えにより、ドライブNo.3の複数のファイル名（A、B、C、D、E、Fなど）が存在し、現在使用しているファイルレジスタのファイル名から別のファイル名に切り替えるイメージ。
- ファイル名はドライブNo.ファイル名設定で指定される。
- QDRSET命令後に使用されるファイルレジスタのファイル名が切り替わることを示している。

### 表
#### エラーコード（SD0）
| エラーコード | 内容 |
| :--- | :--- |
| 2840H | (ファイル名)で指定したドライブNo./ファイル名が存在しないとき。 |
| 3405H | (ファイル名)に指定可能な範囲外のデータを設定したとき。<br>・ドライブNo.に1、3以外を指定している<br>・ドライブNo.のみ指定している |

</contents>