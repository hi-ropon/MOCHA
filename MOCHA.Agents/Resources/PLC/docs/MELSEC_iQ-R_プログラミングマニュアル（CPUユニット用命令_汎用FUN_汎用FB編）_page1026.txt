ファイル名: MELSEC_iQ-R_プログラミングマニュアル（CPUユニット用命令_汎用FUN_汎用FB編）_page1026

<overview>
本ページは「CPUユニット内蔵データベースアクセス機能」の章の一部であり、主に「データベースアクセス命令」について解説しています。ページ構成は以下の通りです。
- テキスト部分：データベースアクセス命令の概要説明、命令の用途や動作についての説明。
- 図部分：ラダー、ST（構造化テキスト）、FBD/LD（ファンクションブロックダイアグラム/ラダー図）での命令表現例。
- 表部分：命令の実行条件、設定データの内容・範囲・データ型・ラベルの詳細をまとめた表。
グラフ部分はありません。
</overview>

<contents>
### テキスト
#### 18 CPUユニット内蔵データベースアクセス機能
##### 18.1 データベースアクセス命令
データベースアクセス命令は、シーケンサ上でデータベースとして管理している製品情報や生産情報などの表形式データに対し、データの追加・更新・取得・削除を行う命令です。  
この命令では、テーブルの構成を定義したUnicodeテキストファイルからデータベースを構築し、そのデータベースを操作します。

#### データベースインポート
命令名：DBIMPORT(P)  
対応CPUユニットのアイコンが示されており、R00CPU、R01CPU、R02CPUでは使用不可と記載。  
指定したパスのUnicodeテキストファイルに設定されたデータを取り込み、データベースを構築します。

### 図
- **ラダー**  
  ラダー図では、(s)、(d1)、(d2)の3つのオペランドを持つ命令ブロックが示されている。  
- **ST（構造化テキスト）**  
  ENO:=DBIMPORT(EN,s,d1,d2);  
  ENO:=DBIMPORTP(EN,s,d1,d2);  
- **FBD/LD**  
  EN、ENO、s、d1、d2の入出力ポートを持つファンクションブロックとして表現。

### 表
#### 実行条件
| 命令       | 実行条件の波形図                 |
|------------|-------------------------------|
| DBIMPORT   | 立ち上がりパルス               |
| DBIMPORTP  | 立ち下がりパルス               |

#### 設定データ
| オペランド | 内容                                                                                   | 範囲 | データ型           | データ型(ラベル)         |
|------------|----------------------------------------------------------------------------------------|------|--------------------|--------------------------|
| (s)        | Unicodeテキストファイル名を格納する先頭デバイス<br>例："2:\database1\recipe_db.txt"<br>文字数は255文字以内 | —    | Unicode文字列      | ANYSTRING_DOUBLE         |
| (d1)       | 完了デバイス（命令完了で1スキャンONする先頭デバイス）<br>・(d1)+0:完了信号<br>・(d1)+1:異常完了信号 | —    | ビット             | ANYBIT_ARRAY（要素数:2） |
| (d2)       | 完了ステータス<br>・0000:正常完了<br>・0000以外:異常完了（エラーコード）               | —    | ワード             | ANY16                    |
| EN         | 実行条件                                                                             | —    | ビット             | BOOL                     |
| ENO        | 実行結果                                                                             | —    | ビット             | BOOL                     |
</contents>