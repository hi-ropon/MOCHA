ファイル名: MELSEC_iQ-R_プログラミングマニュアル（CPUユニット用命令_汎用FUN_汎用FB編）_page1063

<overview>
本ページはCPUユニット内蔵データベースアクセス機能の一部であるDBCOMMIT(P)命令に関する説明で構成されています。ページ全体は以下のセクションで構成されています。
・テキスト部分：DBCOMMIT(P)命令の機能説明、注意事項、エラー発生条件の説明
・図部分：DBCOMMIT(P)命令実行時の完了デバイスの動作タイミングを示すシーケンス図
・表部分：エラーコードとその内容をまとめた表
グラフ部分はありません。
</overview>

<contents>
### テキスト
#### 機能
- (s)で指定した識別番号に対応するデータベースに関するトランザクションを確定させる。
- 正常に完了すると、完了デバイス(d1)の完了信号がONになり、(d2)の完了ステータスに0が格納される。
- DBCOMMIT(P)命令実行時の完了デバイスの動作は図の通り。
- 実行中はSM753（ファイルアクセス中）がONになる。SM753がON中はDBCOMMIT(P)命令は実行不可で、実行した場合は無処理。ただしデータベースアクセス命令実行中は異常完了する。
- CPUユニットのユニットパラメータで「内蔵データベースアクセス使用有無」を使用するに設定している場合、SM1498（内蔵データベース起動完了フラグ）がOFFの間はDBCOMMIT(P)命令は実行不可。実行した場合は無処理となる。
- SM753、SM1498に対応したファームウェアバージョンは別途参照。

#### 注意事項
以下の場合、完了デバイス(d1)+1の異常完了信号がONになり、(d2)の完了ステータスにエラーコードが格納される。
- データベースアクセス命令実行中にDBCOMMIT(P)命令を実行した場合
- 範囲外の識別番号を指定した場合
- トランザクションがない状態でDBCOMMIT(P)命令を実行した場合
- (s)でオープンしていない識別番号を指定した場合

### 図
DBCOMMIT(P)命令実行時の完了デバイス動作シーケンス図
- プログラムのDBCOMMIT(P)命令実行後、完了デバイス(d1)がOFFからONに変わる。
- 完了デバイス(d1)+1もOFFからONになるが、異常完了時はONのまま保持される。
- ONになったタイミングでデータベースコミット処理が行われる。
- END処理のタイミングで完了デバイスの状態がリセットされる。

### 表
#### エラーコード(SD0)
| エラーコード | 内容 |
| :---------- | :--- |
| 2820H       | (d1)で指定した範囲が、該当デバイス/ラベルを超える場合。 |

- 詳細は53ページの「命令実行時のデバイス、ラベルの範囲チェック」を参照。
- オペランドの完了ステータスに格納されるエラーコードは1066ページの「データベースアクセス命令で発生するエラーコード」も参照。
</contents>