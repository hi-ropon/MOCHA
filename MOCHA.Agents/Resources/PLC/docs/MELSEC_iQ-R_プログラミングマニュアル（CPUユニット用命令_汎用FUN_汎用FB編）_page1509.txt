ファイル名: MELSEC_iQ-R_プログラミングマニュアル（CPUユニット用命令_汎用FUN_汎用FB編）_page1509

<overview>
このページは「カウンタ/タイマファンクションブロック」の一部で、主にアップダウンカウンタの機能説明に関する内容で構成されています。ページ全体は以下のセクションで構成されています。
- テキスト部分：カウンタの演算処理の詳細説明（カウントアップ、カウントダウン、その他の動作条件）、および演算結果の説明。
- 図（グラフ）部分：タイミングチャートによる信号のON/OFF変化とカウンタ値の変化を示すグラフ。
- 表はなく、テキストと図の構成が中心。
</overview>

<contents>
### テキスト
#### 機能
■演算処理  
(n)はカウント最大値（加算カウント時）またはカウント開始値（減算カウント時）を設定し、有効範囲は0～32767。  

1. カウントアップ  
- (s1)がOFF→ONで(d3)を加算カウント(+1)する。  
- (d3)が(n)に達すると(d1)がONし、加算カウントは停止。  
- (s3)がONで(d1)はOFF、(d3)は0にリセットされる。  

2. カウントダウン  
- (s2)がOFF→ONで(d3)を減算カウント(-1)する。  
- (d3)が0の場合、(d2)がONし減算カウントは停止。  
- (s4)がONで(d2)はOFF、(n)が(d3)にセットされる。  

3. その他  
- (s1)と(s2)が同時にOFF→ONの場合、(s1)が優先され(d3)を加算カウント(+1)。  
- (s3)と(s4)が同時にONの場合、(s3)が優先され(d3)を0にセット。  

■演算結果  
1. EN/ENOなしファンクションブロック  
演算処理を実行し、(d1)、(d2)、(d3)から演算出力値が出力される。  

#### タイミングチャート（n=3の場合）
- (s1)のOFF→ONで(d3)がカウントアップ。  
- (s3)のOFF→ONで(d3)が初期化（0にリセット）。  
- (s2)のOFF→ONで(d3)がカウントダウン。  
- (s4)のOFF→ONで(d3)が初期化（nの値にセット）。  

### 図（タイミングチャート）
- 横軸は時間経過を示し、縦軸は各信号(s1～s4)、および(d1)、(d2)、(d3)の状態を示す。  
- (s1)～(s4)はOFF/ONの状態変化を示し、(d1)、(d2)はON/OFFの状態を示す。  
- (d3)はカウンタ値を0～3の範囲で変化し、加算・減算・初期化の動作が視覚的に表現されている。  
- 図中の番号(1)～(4)はタイミングチャートの特定の動作ポイントを示し、対応する動作説明が下部に記載されている。  

(1) (s1)のOFF→ONで(d3)をカウントアップ。  
(2) (s3)のOFF→ONで(d3)を初期化。  
(3) (s2)のOFF→ONで(d3)をカウントダウン。  
(4) (s4)のOFF→ONで(d3)を初期化。  
</contents>