ファイル名: MELSEC_iQ-R_プログラミングマニュアル（CPUユニット用命令_汎用FUN_汎用FB編）_page668

<overview>
本ページは「ファイル操作命令」に関する説明で構成されており、主に以下のセクションから成ります。  
・テキスト部分：SP.FDELETE命令の機能説明、注意事項の詳細記述  
・表部分：エラーコードとその内容を示す表  
グラフや図は含まれていません。
</overview>

<contents>
### テキスト
#### 機能
- (s1)で指定したドライブの(s2)で指定したファイルまたはフォルダを削除する。  
- SP.FDELETE命令実行中はSM753（ファイルアクセス中）がONとなり、この間はSP.FDELETE命令は実行不可（実行しても無処理）。  
- 処理完了(d2)のビットデバイスは、SP.FDELETE命令の処理完了を検出したスキャンのEND命令実行時に自動でONし、次のスキャンのEND命令でOFF。  
- SP.FDELETE命令が異常完了した場合は、異常完了(d2)+1のデバイスが処理完了(d2)と同じタイミングでON/OFFされる。  
- 命令実行時に演算エラーを検出した場合は、処理完了(d2)、異常完了(d2)+1はONしない。

#### 注意事項
- SP.FDELETE命令は割込みプログラムで実行しないこと。割込みプログラムで実行すると誤動作の原因となる。  
- 命令実行中にCPUユニットの状態をRUN→STOPに変更しても処理は継続される。  
- 命令処理途中で異常完了した場合、既に削除されたファイルやフォルダは復元されない。  
- 削除対象のファイルサイズやファイル数が大きい場合、命令完了まで時間がかかる。  
- 操作中のファイルには他機能からアクセスしないこと（ファイル破損やエラーの原因）。  
- 他機能からアクセスしているファイルやフォルダへの操作は行わないこと。

### 表
#### エラーコード（SD0）
| エラーコード | 内容 |
| :--- | :--- |
| 3405H | ドライブ指定(s1)がSDメモリーカード以外の場合。<br>または(s2)で指定したファイル名/フォルダ名文字列が読み出せない場合。<br>具体的には以下の条件に該当する場合：<br>・ファイル名文字列が1文字以上指定されていない<br>・ファイル名文字列が254文字以上<br>・フォルダパスが245文字以上<br>・フォルダパスに11階層以上指定<br>・ファイル名文字列の末尾や区切り文字の直前に半角ピリオド指定<br>・ファイル名文字列の末尾に区切り文字指定<br>・フォルダパス内にルート直下のシステムフォルダ($MELPRJ$)指定 |

- SP.FDELETE命令が異常完了した場合、完了ステータス(d1)+1で指定したデバイスにエラーコードが格納される。  
- 演算エラーの場合は格納されない。  
- 完了ステータス(d1)+1に格納されるエラーコードの詳細は687ページのファイル操作命令のエラーコード一覧を参照。

</contents>