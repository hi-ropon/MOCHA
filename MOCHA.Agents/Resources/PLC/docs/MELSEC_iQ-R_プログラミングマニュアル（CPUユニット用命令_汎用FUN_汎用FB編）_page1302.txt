ファイル名: MELSEC_iQ-R_プログラミングマニュアル（CPUユニット用命令_汎用FUN_汎用FB編）_page1302

<overview>
本ページは「コントロールデータ」に関する説明で構成されています。ページ上部に「コントロールデータ」の表があり、デバイスごとの項目と内容、設定範囲、セット側の情報が記載されています。続いて「機能」セクションがあり、テキスト説明とともに待機系CPUユニットと制御系CPUユニット間のデータ書き込みの流れを示す簡単な図が配置されています。最後に、CONTWR(P)命令の動作や注意点についての詳細なテキスト説明と、完了デバイスや完了ステータスに関する項目と内容をまとめた表が掲載されています。全体的にテキスト説明が中心で、表と簡易図が補足的に配置されています。
</overview>

<contents>
### テキスト
#### コントロールデータ
- オペランドは(s1)で指定。
- デバイスごとに「書込みデータ点数」や「完了ステータス」などの項目があり、それぞれの内容、設定範囲、セット側の情報が表形式で示されている。

#### 機能
- (s2)で指定した待機系のデバイス/ラベルから、(s1)で指定した書込みデータ点数分のデータを、(d1)で指定した制御系のデバイス/ラベルに書き込む。
- 制御系へのデータ書込みが完了すると、(d2)で指定した待機系の完了デバイスがONになる。
- CONTWR(P)命令は待機系でのみ実行可能で、制御系で実行しても無処理。
- 複数回実行した場合、1回目の命令完了まで2回目以降は無処理。
- 実行開始から完了までに系切替があっても命令は中止せず継続し、系切替後は新制御系で完了デバイス(d2)がONになる。
- 正常完了/異常完了は設定データで指定した完了デバイス(d2)で確認可能。異常完了時は完了ステータス(s1)+1にデータ書込み不可要因が格納される。

### 図
- 待機系CPUユニットから制御系CPUユニットへデータ書込みが行われる流れを示す簡易図。
  - 左側に待機系CPUユニットの(s2)と(s1)の範囲を示す。
  - 右側に制御系CPUユニットの(d1)と(s1)の範囲を示す。
  - 矢印で「データ書込み」の動作を表現。

### 表
#### コントロールデータ（上部表）
| デバイス | 項目           | 内容                                         | 設定範囲 | セット側 |
| :------- | :------------- | :------------------------------------------- | :------- | :------- |
| +0       | 書込みデータ点数 | 書込みデータ点数をワード単位で設定          | 1～1024  | ユーザ   |
| +1       | 完了ステータス  | 命令完了時の状態を格納。0:正常完了、0以外:異常完了（データ書込み不可要因） | ―        | システム |

#### 完了関連項目（下部表）
| 項目                 | 内容                                                                                   |
| :------------------- | :------------------------------------------------------------------------------------- |
| 完了デバイス(d2)      | CONTWR(P)命令が完了したスキャンのEND処理でONし、次のEND処理でOFFする。               |
| 完了時の状態表示デバイス(d2)+1 | CONTWR(P)命令完了時の状態によりON/OFF。正常完了時はOFFのまま、異常完了時はON。異常完了時はCONTWR(P)命令完了スキャンのEND処理でONし、次のEND処理でOFF。 |
| 完了ステータス(s1)+1  | データ書込み不可要因を格納。0:正常書込み完了、1:トラッキング通信不可、2:他系がプロセスモード、3:制御系がCONTWR(P)命令未対応、4:デバイス/ラベル割付不一致、5:制御系デバイス/ラベル範囲外 |

</contents>