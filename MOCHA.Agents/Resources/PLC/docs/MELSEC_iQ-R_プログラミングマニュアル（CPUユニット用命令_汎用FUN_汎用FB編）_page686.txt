ファイル名: MELSEC_iQ-R_プログラミングマニュアル（CPUユニット用命令_汎用FUN_汎用FB編）_page686

<overview>
本ページは「ファイル操作命令」に関する説明で構成されており、主に以下のセクションで構成されています。  
・テキスト部分：機能説明、注意事項、エラーに関する詳細な解説  
・表部分：エラーコードとその内容をまとめた表  
グラフや図は含まれていません。
</overview>

<contents>
### テキスト
#### 機能
- (s1)で指定したドライブの(s2)で指定したファイルまたはフォルダの状態を取得し、(d2)以降のデバイスに格納する。  
- (s2)にフォルダを指定した場合、(d2)+2～(d2)+3には0を格納する。  
- SP.FSTATUS命令実行中はSM753（ファイルアクセス中）がONとなり、この間はSP.FSTATUS命令は実行不可（実行しても無処理）。  
- 処理完了で(d3)のビットデバイスは、SP.FSTATUS命令の処理完了を検出したスキャンのEND命令実行時に自動でONし、次のスキャンのEND命令でOFF。  
- SP.FSTATUS命令が異常完了した場合は、異常完了(d3)+1のデバイスが処理完了(d3)のデバイスと同じタイミングでON/OFF。  
- 命令実行時に演算エラーを検出した場合は、処理完了(d2)、異常完了(d2)+1はONしない。

#### 注意事項
- SP.FSTATUS命令は割込みプログラム中では実行しないこと。割込みプログラムで実行すると誤動作の原因となる。  
- 命令実行中にCPUユニットの状態をRUN→STOPに変更しても、本命令の処理は継続される。

### 表
#### エラーコード（SD0）
| エラーコード | 内容 |
|--------------|------|
| 3405H        | ドライブ指定(s1)によって指定されたドライブがSDメモリーカード以外のとき。<br> (s2)で指定したファイル名/フォルダ名文字列が読み出せないとき。<br> ・ファイル名文字列が1文字以上指定されていない。<br> ・指定したファイル名文字列に254文字以上を指定した。<br> ・指定したフォルダパスに245文字以上を指定した。<br> ・指定したフォルダパスに11以上の階層を指定した。<br> ・ファイル指定時、指定したファイル名文字列の末尾に区切り文字を指定した。<br> ・指定したファイル名文字列の末尾、または各区切り文字の直前に半角ピリオドを指定した。 |

- SP.FSTATUS命令が異常完了した場合、完了ステータス(d1)+1で指定したデバイスにエラーコードが格納される。  
- 演算エラーの場合はエラーコードは格納されない。  
- 詳細なエラーコードは687ページのファイル操作命令で発生するエラーコードを参照。

</contents>