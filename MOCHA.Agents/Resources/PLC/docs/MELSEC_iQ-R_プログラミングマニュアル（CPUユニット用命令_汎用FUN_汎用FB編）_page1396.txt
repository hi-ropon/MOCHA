ファイル名: MELSEC_iQ-R_プログラミングマニュアル（CPUユニット用命令_汎用FUN_汎用FB編）_page1396

<overview>
本ページは「32.58 STRING型→BCD型変換」についての説明で構成されています。  
テキスト部分では、関数名や対応CPU、機能概要、引数の説明、演算処理の詳細が記載されています。  
表部分では、引数の内容・種別・データ型の一覧表と、入力文字列と変換文字列およびBCD型出力の対応表が掲載されています。  
図部分はラダー回路やST言語での使用例の簡単な模式図が含まれています。
</overview>

<contents>
### テキスト
#### 32.58 STRING型→BCD型変換
関数名：STRING_TO_BCD(_E)  
対応CPU：RnCPU、RnENCPU、RnPCPU（三重化・一般）、RnSPFCPU（安全・一般）  
説明：STRING型データをBCD型データへ変換します。

##### ラダー、FBD/LD、STでの使用例
- ラダー/FBD/LDでは、EN/ENOなしとEN/ENO付きの2種類の接続図が示されています。  
- ST言語では、EN/ENOなしの場合は `d:=STRING_TO_BCD(s);`、EN/ENO付きの場合は `d:=STRING_TO_BCD_E(EN,ENO,s);` と記述します。

#### 設定データ
##### 内容、種別、データ型
| 引数 | 内容 | 種別 | データ型 |
| :--- | :--- | :--- | :--- |
| EN | 実行条件(TRUE:実行、FALSE:停止) | 入力変数 | BOOL |
| s(IN) | 入力 | 入力変数 | STRING(8) |
| ENO | 出力状態(TRUE:正常、FALSE:異常) | 出力変数 | BOOL |
| d | 出力 | 出力変数 | ANY_BIT |

#### 機能
##### 演算処理
- 入力されたSTRING型4文字分のデータをBCD型(WORD型)のデータに変換し、dから出力します。  
- 文字列中に20H(スペース)が含まれていた場合は20Hを無視して変換します。  
- 文字列中の20H(スペース)、30H(0)も1文字としてカウントします。  
- 入力値はASCIIコードで30H〜39H、20H、00Hの範囲内である必要があります。  
- 4文字に満たない場合は文字列の後ろに0を補完して4文字にします。例：'1'は'0001'に変換。  
- 4文字を超える場合は左から4文字が変換対象となります。

### 表
#### 入力文字列と変換文字列および出力(BCD型)の対応例

| 入力文字列 | 変換文字列 | 出力(BCD型) |
| :--- | :--- | :--- |
| '1' | '1000' | 1000H(4096D) |
| '12' | '1200' | 1200H(4608D) |
| '123' | '1230' | 1230H(4656D) |
| '1234' | '1234' | 1234H(4660D) |
| '12345' | '1234' | 1234H(4660D) |

- dにはWORD型、DWORD型が指定可能。BOOL型は指定不可。

### 図
- ラダー/FBD/LDの接続図は、EN/ENOなしとEN/ENO付きの2パターンが示されている。  
- ST言語の使用例は、EN/ENOなしとEN/ENO付きの関数呼び出し文が記載されている。
</contents>