ファイル名: MELSEC_iQ-R_プログラミングマニュアル（CPUユニット用命令_汎用FUN_汎用FB編）_page1168

<overview>
本ページは「内蔵Ethernet機能用命令」の一部である「ソケット通信命令」についての説明で構成されています。ページ全体は以下のセクションに分かれています。
- テキスト部分：命令の機能説明、エラーコードの説明、注釈など
- 表部分：オペランドごとのデバイス、項目、内容、設定範囲、セット側をまとめた詳細な表
- 図・グラフ部分はなく、表の中にビットフィールドの説明が含まれている
</overview>

<contents>
### テキスト
#### 機能
(s1)で指定したコネクションのコネクション情報を読み出す命令であることが説明されています。

#### エラー
- エラーコード(SD0)の説明として「3405H」が記載されており、(s1)で指定するコネクション番号が1～16以外の場合に発生することが示されています。
- 異常完了時は完了ステータス(s2)+1にエラーコードが格納される旨の説明があります。
- 完了ステータス(s2)+1に格納されるエラーコードの詳細は別途「MELSEC iQ-R Ethernetユーザーズマニュアル(応用編)」を参照するよう案内されています。

### 表
#### オペランド(s2)
| デバイス | 項目 | 内容 | 設定範囲 | セット側 |
| :--- | :--- | :--- | :--- | :--- |
| +0 | システムエリア | － | － | － |
| +1 | 完了ステータス | 命令完了時に完了ステータスを格納。<br>・0000H:正常完了<br>・0000H以外:異常完了(エラーコード) | － | システム |

#### オペランド(d)
| デバイス | 項目 | 内容 | 設定範囲 | セット側 |
| :--- | :--- | :--- | :--- | :--- |
| +0 | 相手機器IPアドレス | 相手機器のIPアドレスを格納 | 00000001H～FFFFFFFFH<br>00000000H:交信相手なし<br>FFFFFFFFH:一斉同報通信 | システム |
| +2 | 相手機器ポート番号 | 相手機器のポート番号を格納 | 0001H～FFFFH (FFFFH:一斉同報通信) | システム |
| +3 | 自局ポート番号 | 自局ポート番号を格納 | 0001H～1387H<br>1392H～FFFEH | システム |
| +4 | コネクション使用用途 | コネクションの使用用途を格納 | － | システム |

##### コネクション使用用途のビット詳細
- b15～b0のビット割り当てが表形式で示されている（例：(d)+4のビット配置）
- (1) 通信方式(プロトコル)(ビット8)
  - 0: TCP/IP
  - 1: UDP/IP
- (2) ソケット通信機能の手順有無(ビット9)
  - 1: 無手順(固定)
- (3) オープン方式(ビット15,14)
  - 00: ActiveオープンまたはUDP/IP
  - 10: Unpassiveオープン
  - 11: Fullpassiveオープン
- (4) 通信プロトコル設定(ビット10)
  - 0: 通信プロトコル支援機能を使用しない（ソケット通信機能を使用する）
  - 1: 通信プロトコル支援機能を使用する

##### 注釈
- 対応機種やファームウェアバージョンによる制約について記載
  - R00CPU、R01CPU、R02CPUはバージョンによる制約なし
  - それ以外のCPUはバージョン制約あり（Rn(EN)CPUは"29"以降、RnPCPUは"15"以降）

### その他
- ページ下部に「24 内蔵Ethernet機能用命令」「24.2 ソケット通信命令」と記載されており、マニュアルの章節を示しています。
</contents>