ファイル名: MELSEC_iQ-R_プログラミングマニュアル（CPUユニット用命令_汎用FUN_汎用FB編）_page1054

<overview>
このページは、CPUユニット内蔵データベースアクセス機能の一部である「データベースアクセス命令(DBSELECT(P)命令)」について説明しています。構成は以下の通りです。
- テキスト部分：DBSELECT(P)命令の機能説明、動作条件、注意事項
- 表部分：テーブルrecipeAのフィールド構成とサンプルデータ
- 図部分：DBSELECT(P)命令の実行時の完了デバイスの動作を示すタイミングチャート
</overview>

<contents>
### テキスト
#### 機能
- (s1)で指定した識別番号に対応するデータベースの(s2)で指定したテーブルのレコードを検索し、最大64件まで出力可能。
- 検索するレコードのフィールド名は(s3)で指定。
- 検索条件は(s4)で指定し、最大2個まで設定可能。
- 検索結果は(d1)に格納。
- 割込みプログラムからの実行も可能。
- DBSELECT(P)命令は、出力フィールドがフィールド2とフィールド3、条件がフィールド1=2の条件に合致するテーブルrecipeAのレコードを検索して出力する例を示す。
- 正常完了時は完了デバイス(d2)の完了信号がONになり、(d3)の完了ステータスに0が格納される。
- DBSELECT(P)命令実行時の完了デバイスの動作についても説明。

#### 注意事項
- SM753（ファイルアクセス中）はDBSELECT(P)命令は実行不可。SM753がONの間は命令は無処理。
- CPUユニットのユニットパラメータで内蔵データベースアクセス使用有無を「使用する」に設定し、SM1498（内蔵データベース起動完了フラグ）がOFFの間は命令は実行不可。実行した場合は無処理。

### 表
#### テーブルrecipeAの構成
| フィールド1 (WORD型) | フィールド2 (WSTR型 最大16文字) | フィールド3 (INT型) |
|----------------------|---------------------------------|---------------------|
| 1                    | ProductA                        | 100                 |
| 2                    | ProductB                        | 200                 |
| 3                    | ProductC                        | 300                 |

### 図
#### DBSELECT(P)命令の完了デバイス動作タイミングチャート
- プログラム開始後、DBSELECT(P)命令が実行される。
- 完了デバイス(d2)は命令実行前はOFF。
- データベースのデータを検索中は完了デバイス(d2)はOFFのまま。
- 検索完了時に完了デバイス(d2)がONになる。
- 完了デバイス(d2)+1も同様にONになるが、異常完了時はONのまま保持される。
- END処理で完了デバイスはOFFに戻る。

</contents>