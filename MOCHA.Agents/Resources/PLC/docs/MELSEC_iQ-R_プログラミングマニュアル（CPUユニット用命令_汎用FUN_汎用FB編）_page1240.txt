ファイル名: MELSEC_iQ-R_プログラミングマニュアル（CPUユニット用命令_汎用FUN_汎用FB編）_page1240

<overview>
本ページはPID制御命令に関する説明で構成されています。ページ全体は主にテキスト部分と表部分からなり、テキスト部分ではPID制御命令の動作概要や注意点、使用上の条件が詳細に記載されています。表部分では入出力データの割り付けが具体的に示されており、各データ項目に対応するデバイス番号や役割が一覧化されています。グラフや図は含まれていません。
</overview>

<contents>
### テキスト
#### PID制御命令の概要と動作
- S(P).PIDCONT命令実行時に、サンプリング周期の計測とPID演算を行う。
- S(P).PIDCONT命令は、(s)で指定したデバイス番号以降に設定されている入出力データエリアの設定値(SV)、測定値(PV)をもとにPID演算を行い、演算結果を入出力データエリアの自動操作量(MV)エリアに格納する。
- PID演算はサンプリング周期の設定時間経過後の最初のS(P).PIDCONT命令実行時に行う。
- PID制御中は必ず制御指令をONにし、S(P).PIDCONT命令を毎スキャン実行させる必要がある。実行しない場合、正常なサンプリング周期でPID演算ができなくなる。
- 1スキャン中に複数回S(P).PIDCONT命令を実行させることはできず、複数回実行した場合も正常なサンプリング周期でのPID演算はできない。
- S(P).PIDCONT命令は割込みプログラムでの使用不可。割込みプログラムに記述した場合も正常なサンプリング周期でPID演算できなくなる。
- (s)には入出力データエリアの先頭デバイス番号を指定する。ファイルレジスタを指定した場合はメモリプロテクトをかけないこと。
- 入出力データは以下の表のように割り付けられている。

### 表
#### 入出力データ割り付け

| 項目                     | 入出力データ         | 内容                           |
|--------------------------|----------------------|--------------------------------|
| ライト                   | (s)+0                | 初回処理フラグ                 |
| リード/ライト禁止         | (s)+1 ～ (s)+9       | PID制御用ワークエリア（ユーザ使用不可） |
| No.1ループ用入出力データエリア (23ワード) | ライト (s)+10          | 設定値(SV)                    |
|                          | リード (s)+11         | 測定値(PV)                    |
|                          | リード (s)+12         | 自動操作量(MV)                |
|                          | リード (s)+13         | フィルタ後の測定値(PVf)       |
|                          | ライト (s)+14         | 手動操作量(MV_MAN)            |
|                          | ライト (s)+15         | 手動/自動選択(MAN/AUTO)       |
|                          | リード/ライト (s)+16  | アラーム(ALARM)               |
|                          | リード/ライト禁止 (s)+17 ～ (s)+32 | No.1ループ用ワークエリア（ユーザ使用不可） |
| No.nループ用入出力データエリア (23ワード)*1 | ライト (s)+(m+0)        | 設定値(SV)                    |
|                          | リード (s)+(m+1)      | 測定値(PV)                    |
|                          | リード (s)+(m+2)      | 自動操作量(MV)                |
|                          | リード (s)+(m+3)      | フィルタ後の測定値(PVf)       |
|                          | ライト (s)+(m+4)      | 手動操作量(MV_MAN)            |
|                          | ライト (s)+(m+5)      | 手動/自動選択(MAN/AUTO)       |
|                          | リード/ライト (s)+(m+6) | アラーム(ALARM)               |
|                          | リード/ライト禁止 (s)+(m+7) ～ (s)+(m+22) | No.nループ用ワークエリア（ユーザ使用不可） |

*1 m = (n-1)×23 + 10

#### 補足事項
- 入出力データの設定に使用するデバイスの点数は「10 + 23×n（使用ループ数）」で算出。
- 各データはBIN値で設定する。
- 初回処理フラグはPID演算開始時の処理方法設定用。
- 初回演算処理時は設定されたサンプリング周期に達しているとみなして演算。
- 初回処理フラグが0の場合、使用ループ数分のPID演算処理を1スキャンで一括処理。0以外の場合は使用ループ数分のPID演算処理を分割して処理し、初回処理完了後から順次サンプリング開始。
- 1スキャンあたりの処理ループ数は設定されている1スキャンの実行ループ数となる。
</contents>