ファイル名: MELSEC_iQ-R_プログラミングマニュアル（CPUユニット用命令_汎用FUN_汎用FB編）_page736

<overview>
このページは、データ処理命令の一つであるBIN32ビットデータのソート機能について説明しています。ページ構成は以下の通りです。
- テキスト部分：機能の説明、ソートの動作条件や注意点、エラー発生時の対応について詳細に記述。
- 図部分：BIN32ビットデータの昇順・降順ソートの具体例を示す図が2つ配置されている。
- 表部分：エラーコードとその内容をまとめた表が掲載されている。
</overview>

<contents>
### テキスト
#### 機能
BIN32ビットデータを、(s1)から(n)点分について昇順または降順にソート（並び替え）します。  
- ソート順はSM703（ソート順）ビットの状態で決まり、OFF時は昇順、ON時は降順でソートされます。  
- ソートにはDSORTD(_U)命令を使用し、実行完了までのスキャン回数は最大実行回数で計算されます。  
- 最大実行回数は(n)×(n-1)÷2で算出され、例えばn=10の場合は45回のスキャンが必要です。  
- ソート完了後、指定デバイス(d1)はONとなり保持されます。必要に応じてOFFにしてください。  
- ソート実行中に指定デバイス(d2)から2点はシステム使用のため変更不可です。  
- ソート実行中に(n)を変更した場合は変更後のデータ数でソートされます。  
- 実行指令をOFFにするとソートは中断し、再度ONにすると最初からやり直します。  
- 連続してソートを行う場合は、一度実行指令をOFFにしてから再度ONにする必要があります。

#### エラー
| エラーコード (SD0) | 内容 |
|--------------------|------|
| 2821H | (s1)から2×(n)点分のデバイス範囲と(d2)から2点分のデバイス範囲が重複しているとき。 |
| 3405H | (s2)が0のとき。<br>2スキャン目以降で、システムで使用する(d2)の値が(n)以上の値であるとき。<br>2スキャン目以降で、システムで使用する(d2)の値が(d2)＜(d2)+1であるとき。 |

### 図
- 左側の図はSM703がOFFの場合のソート例で、元のデータは35000、-1000、500、-124の順。ソート後は昇順で-1000、-124、500、35000となる。  
- 右側の図はSM703がONの場合のソート例で、同じデータが降順に35000、500、-124、-1000となる。  
- 各データは(s1)+1、(s1)+3、(s1)+5、(s1)+7のアドレスに対応している。

### 表
#### エラーコード一覧
| エラーコード | 内容説明 |
|--------------|----------|
| 2821H | ソート対象範囲とシステム使用範囲が重複している場合のエラー。 |
| 3405H | (s2)が0、またはシステム使用範囲の値が不正な場合に発生するエラー。 |

</contents>