ファイル名: MELSEC_iQ-R_プログラミングマニュアル（CPUユニット用命令_汎用FUN_汎用FB編）_page1293

<overview>
本ページは、SFC制御命令に関する説明で構成されています。ページ上部に「機能」のテキスト説明があり、その下にシーケンスプログラムとSFCプログラムの命令実行と対象ブロックの切り替えを示すフロー図が配置されています。ページ下部には「エラー」セクションがあり、エラーコードとその内容を示す表が掲載されています。全体として、テキスト説明、図（フロー図）、表の3つのセクションで構成されています。
</overview>

<contents>
### テキスト
#### 機能
- ステップ（S口）のみで指定するSFC制御命令の対象ブロックを、(s)で指定したデバイスに設定されている番号に切り替える。
- BRSET命令を実行した場合、対象ブロックの切替えが有効になるのは、実行したプログラムにより以下の通り。
  - シーケンスプログラムで実行した場合、対象ブロックの切替えが有効なのは命令実行からSFCプログラム実行まで。次のスキャン時は再度命令を実行するまでデフォルトとして対象ブロックはブロック0になる。
  - SFCプログラムで実行した場合、対象ブロックの切替えが有効なのは実行中のステップのみ。対象ステップが同一の場合でも、SD命令を使用するブロックごとにBRSET命令を実行する必要がある。また、ステップ内でも有効なのは命令実行から指定ステップの処理終了まで。指定ブロックの処理終了し次のプログラムを実行する場合は、再度命令を実行するまでデフォルトとして対象ブロックは自ブロックになる。

- BLD￥S口で指定するブロックNo.はBRSET命令の実行/非実行にかかわらず有効。
- 並列分岐など複数ステップが活性している場合、命令を実行したステップのみ有効になるため、複数ステップでブロックを指定する場合はステップごとに命令を実行する必要がある。

### 図（フロー図）
- 横軸に「実行プログラム」と「対象ブロック」があり、時間軸に沿って命令実行と対象ブロックの切り替えを示す。
- シーケンスプログラムの命令実行（A、B）により対象ブロックが命令で指定したブロックに切り替わる。
- SFCプログラムの命令実行時は対象ブロックが自ブロックと命令で指定したブロックを繰り返す。
- END命令は処理されない（注記あり）。

### 表（エラーコード）
| エラーコード (SD0) | 内容 |
|--------------------|------|
| 31A1H | 指定したブロックが存在しないとき、またはSFCプログラムが待機状態のとき。SFCプログラムが存在しない（スキャン実行タイプのSFCプログラムが存在しない）、またはSM321（SFCプログラムの起動/停止）がOFFに設定して命令を実行したとき。 |
| 31A2H | 指定ブロックNo.が指定可能なブロックNo.の範囲外のとき。 |
</contents>