ファイル名: MELSEC_iQ-R_プログラミングマニュアル（CPUユニット用命令_汎用FUN_汎用FB編）_page489

<overview>
本ページは「データ変換命令」に関する説明で構成されています。ページ全体は以下のセクションに分かれています。
- テキスト部分：機能の説明、処理の概要、注意点、仕様の詳細
- 図部分：文字列の格納構造や変換イメージを示す図、具体例のデータ構造図
- 表部分：明確な表形式はないが、図中にデータのビット配置や数値の説明が含まれている
- 例示部分：具体的な文字列変換例を複数の図とともに示し、符号付き数値の扱い方を解説

<contents>
### テキスト
#### 機能概要
(s)で指定されたデバイス番号以降に格納されている文字列を、BIN16ビットデータに変換します。変換後は、桁数を(d1)に、小数点を無視したBINデータを(d2)に格納します。文字列→BIN変換では、(s)で指定されたデバイス番号から00Hが格納されているデバイス番号までのデータを文字列として処理します。

#### 仕様詳細
- 文字列の全文字数は2～8文字。
- 小数部の文字数は0～5文字で、「全桁数-3」以下で指定する必要がある。
- 符号付き数値の場合、BIN値は-32768～32767、符号なしは0～65535の範囲。
- 符号は正の数は20H、負の数は2DHを設定。
- 小数点は2EHを設定。
- (d1)には符号・小数点を含む全文字数を格納し、(d1)+1には小数部の文字数を格納。
- (d2)には小数点を無視した文字列をBIN16ビットデータに変換して格納。
- 文字列中に符号と最初の0以外の数値の間に20H（スペース）か30H（0）がある場合は無視してBIN値に変換。

### 図・例
- 文字列の格納例として、(s)から(s)+4までのデバイスにASCIIコードが格納されている様子を示す図。
- 変換後の(d1)、(d1)+1、(d2)の格納イメージを示す。
- 例として「-123.45」の文字列が指定された場合のビット配置と変換結果を図示。
- 符号と最初の0以外の数値の間に20H（スペース）がある場合の無視例。
- 符号と最初の0以外の数値の間に30H（0）がある場合の無視例。

### ポイント
- 文字列の符号は20H（正）、2DH（負）で表現。
- 小数点は2EHで表現。
- BIN16データは小数点を無視した整数値として格納。
- 文字列中の特定のスペースや0は無視して変換可能。

以上により、文字列形式の数値データをBIN16形式に変換し、数値計算などに利用できるようにする命令の仕様と使用例が詳細に説明されています。
</contents>