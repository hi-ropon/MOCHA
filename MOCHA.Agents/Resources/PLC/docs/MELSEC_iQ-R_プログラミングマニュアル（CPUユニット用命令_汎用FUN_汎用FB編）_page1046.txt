ファイル名: MELSEC_iQ-R_プログラミングマニュアル（CPUユニット用命令_汎用FUN_汎用FB編）_page1046

<overview>
このページは、CPUユニット内蔵データベースアクセス機能の一部である「DBUPDATE(P)命令」について説明しています。構成は以下の通りです。
- テキスト部分：DBUPDATE(P)命令の機能説明、更新条件やフィールド指定のルール、正常終了時の動作について記載。
- 表部分：命令実行前後のテーブル（recipeA）の状態を示す2組の表があり、更新前後のデータの変化を具体的に示している。
- グラフ部分：なし。
</overview>

<contents>
### テキスト
#### DBUPDATE(P)命令の機能
- (s1)で指定した識別番号によりデータベース内のテーブル(s2)を特定し、(s5)で指定した条件に合致するすべてのレコードを更新する。
- (s3)で更新するレコードのフィールド名を指定。テーブル内のすべてのフィールドを指定する必要はなく、最低1つは指定必須。
- (s4)で更新するレコードの値を指定。指定しないフィールドの値は更新されない。
- (s5)で更新条件を指定。条件は最低1個、最大2個まで設定可能。
- DBUPDATE(P)命令により、指定したフィールド名のデータを新しい値に更新し、条件に合致するレコードを更新する。

#### 正常終了時の動作
- 完了デバイス(d1)+0の完了信号がONになる。
- (d2)の完了ステータスに0が格納される。

### 表
#### テーブルrecipeAの更新例1
- 更新前のテーブルは3レコードあり、フィールド1はWORD型、フィールド2はWSTR型（最大16文字）、フィールド3はINT型。
- フィールド2の値が「ProductB」である2番目のレコードのフィールド2を「New-Product1」に更新。
- 更新後は2番目のレコードのフィールド2が「New-Product1」に変わっている。

| フィールド1 (WORD型) | フィールド2 (WSTR型 最大16文字) | フィールド3 (INT型) |
|---------------------|-------------------------------|------------------|
| 1                   | ProductA                      | 100              |
| 2                   | ProductB                      | 200              |
| 3                   | ProductC                      | 300              |

更新後：

| フィールド1 (WORD型) | フィールド2 (WSTR型 最大16文字) | フィールド3 (INT型) |
|---------------------|-------------------------------|------------------|
| 1                   | ProductA                      | 100              |
| 2                   | New-Product1                  | 200              |
| 3                   | ProductC                      | 300              |

#### テーブルrecipeAの更新例2
- 更新前のテーブルは4レコードあり、同様のフィールド構成。
- 更新条件はフィールド1が2以上かつ3以下のレコード。
- フィールド2を「New-Product1」、フィールド3を200→400に更新。
- 更新後は2番目と3番目のレコードのフィールド2が「New-Product1」に、3番目のレコードのフィールド3が400に変わっている。

| フィールド1 (WORD型) | フィールド2 (WSTR型 最大16文字) | フィールド3 (INT型) |
|---------------------|-------------------------------|------------------|
| 1                   | ProductA                      | 100              |
| 2                   | ProductB                      | 200              |
| 3                   | ProductC                      | 300              |
| 4                   | ProductD                      | 200              |

更新後：

| フィールド1 (WORD型) | フィールド2 (WSTR型 最大16文字) | フィールド3 (INT型) |
|---------------------|-------------------------------|------------------|
| 1                   | ProductA                      | 100              |
| 2                   | New-Product1                  | 200              |
| 3                   | New-Product1                  | 400              |
| 4                   | ProductD                      | 400              |

</contents>