ファイル名: MELSEC_iQ-R_プログラミングマニュアル（CPUユニット用命令_汎用FUN_汎用FB編）_page1177

<overview>
本ページは「24.3 通信プロトコル支援機能命令」の一部で、「登録プロトコル実行」命令（SP.ECPRTCL）について説明しています。ページ構成は以下の通りです。
- テキスト部分：命令の概要説明、実行条件の説明
- 図部分：ラダー図、FBD/LD図、ST言語での命令記述例
- 表部分：設定データの内容・範囲・データ型の説明表、使用可能デバイスの一覧表
グラフは含まれていません。
</overview>

<contents>
### テキスト
#### 24.3 通信プロトコル支援機能命令 登録プロトコル実行
命令名は「SP.ECPRTCL」で、通信プロトコル支援機能で設定したプロトコルを実行するための命令です。

#### 実行条件
命令「SP.ECPRTCL」の実行条件は特に指定されておらず、入力条件が成立した場合に実行されます。

### 図
#### ラダー図
- ラダー図では、命令ブロックにパラメータとして(U)、(s1)、(s2)、(s3)、(d)が入力されている形が示されています。

#### FBD/LD図
- FBD/LD図では、命令ブロックにEN（入力）、ENO（出力）、U、s1、s2、s3が入力端子としてあり、dが出力端子として示されています。

#### ST言語
- ENO := SP_ECPRTCL(EN, U, s1, s2, s3, d);
  という形で命令を呼び出します。

### 表
#### 設定データ：内容、範囲、データ型

| オペランド | 内容                             | 範囲               | データ型       | データ型（ラベル）           |
|-------------|--------------------------------|--------------------|----------------|------------------------------|
| (U)         | ダミー                         | —                  | 文字列         | ANYSTRING_SINGLE             |
| (s1)        | コネクション番号               | 1～16              | 符号なしBIN16ビット | ANY16                        |
| (s2)        | 連続実行するプロトコルの数     | 1～8               | 符号なしBIN16ビット | ANY16                        |
| (s3)        | コントロールデータを格納する先頭デバイス | コントロールデータ参照 | ワード         | ANY16_ARRAY（要素数：2）     |
| (d)         | 命令完了にて1スキャンONするデバイス 異常完了時は(d)+1もONします。 | —                  | ビット         | ANYBIT_ARRAY（要素数：2）    |
| EN          | 実行条件                       | —                  | ビット         | BOOL                         |
| ENO         | 実行結果                       | —                  | ビット         | BOOL                         |

#### 使用可能デバイス

| オペランド | ビットデバイス                             | ワードデバイス                             | ダブルワードデバイス | 間接指定 | 定数 | その他(U) |
|------------|------------------------------------------|------------------------------------------|---------------------|----------|------|-----------|
| (U)        | —                                        | ○                                        | —                   | —        | ○    | ○         |
| (s1)       | ○                                        | —                                        | —                   | —        | ○*1  | —         |
| (s2)       | ○                                        | —                                        | —                   | —        | ○*1  | —         |
| (s3)       | ○                                        | —                                        | —                   | —        | ○*1  | —         |
| (d)        | ○*1                                      | —                                        | —                   | —        | ○*1  | —         |

※注記：*1 ローカルデバイスおよびプログラムごとに設定したファイルレジスタは使用できません。

---

以上の内容から、この命令は通信プロトコル支援機能で設定したプロトコルを指定したコネクション番号や連続実行数などのパラメータで実行し、完了時に指定ビットをONにする機能を持つことがわかります。
</contents>