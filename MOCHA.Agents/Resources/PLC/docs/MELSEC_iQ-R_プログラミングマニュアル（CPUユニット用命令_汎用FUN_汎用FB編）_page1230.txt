ファイル名: MELSEC_iQ-R_プログラミングマニュアル（CPUユニット用命令_汎用FUN_汎用FB編）_page1230

<overview>
本ページはPID制御に関する説明で構成されており、主にテキスト部分でPID演算のループ数とサンプリング周期の概念を解説しています。図はPIDCONT命令の実行タイミングと処理時間の関係を示すフローチャートと、サンプリング周期設定の具体例を示すタイムライン図が含まれています。表はなく、グラフもありません。
</overview>

<contents>
### テキスト
#### 使用ループ数と1スキャンの実行ループ数
- 使用ループ数はPID演算を実行するループ数で、PIDCONT命令実行時に設定されたループ数分のサンプリング周期の計測を行い、その周期に達したループのPID演算を実行する。
- PIDCONT命令実行時の処理時間は、PID演算を実行するループ数に比例して増加する。
- 1スキャンの実行ループ数は、サンプリング周期に達したループが複数ある場合に、1スキャンで何ループのPID演算を行うかの設定。
- 1スキャンの実行ループ数を指定すると、PIDCONT命令実行時にサンプリング周期に達しているループ数が多くても、設定された数だけ実行し、残りは次スキャンで実行する。

**Point**
- サンプリング周期に達したループが1スキャンの実行ループ数より多い場合の優先順位は以下の通り。
  - ループNo.の若い番号が優先される。
  - 前のスキャンでPID演算を実行していないループが優先される。

#### サンプリング周期
- PID演算を行う周期で、PIDCONT命令実行ごとに1スキャン分の計測時間を前回までの計測時間に加算する。
- 加算された値が設定されたサンプリング周期以上になると、そのループのPID演算を実行。
- サンプリング周期は10ms単位の実行値を使用。

### 図
#### PIDCONT命令の実行と処理時間の関係図
- PIDCONT命令の実行開始から終了までの処理時間は「A + B × n」で表される。
  - A：サンプリング周期の計測などの固定時間
  - B：ループのPID演算を行うための時間
  - n：ループ数
- スキャンタイム内にPIDCONT命令の実行と次のステップが存在し、処理時間が示されている。

#### サンプリング周期設定の例（50msの場合）
- プログラムのタイムライン上にPIDCONT命令の実行と終了（END）が繰り返される様子を示す。
- PV（計測値）が19msごとに加算され、サンプリング周期50msに達した時点でPID演算を実行。
- 例では、初期値でPID演算を実行し、その後19ms、38ms、57ms…と計測値が加算され、57msでサンプリング周期50msを超えたためPID演算を実行し、計測値を57-50=7msにリセット。
- 同様に60msでPID演算を実行し、計測値を4msに変更。

### 用語説明
- PV：計測値
- SV：設定値
</contents>