ファイル名: MELSEC_iQ-R_プログラミングマニュアル（CPUユニット用命令_汎用FUN_汎用FB編）_page815

<overview>
本ページは文字列処理に関する説明で構成されており、主にテキスト部分と図表部分で構成されています。テキスト部分では、単精度実数データを文字列に変換し、指定されたデバイス番号以降に格納する機能について解説しています。図表部分では、小数点形式の詳細なデータ構造や変換後のデータ格納方法を示す図と表が配置されており、数値の各桁の扱いや符号の格納方法、四捨五入の処理などが視覚的に説明されています。
</overview>

<contents>
### テキスト
#### 機能概要
- (s1)で指定されたデバイスに格納されている単精度実数データを、(s2)で指定されたデバイス番号以降に表示指定に従って文字列に変換し、(d)で指定されたデバイス番号以降に格納する。
- (s2)で指定された表示指定により変換後のデータは異なる。

#### 小数点形式
- (s2)に0を指定した場合、小数点形式となる。
- (s2)+1には全桁数、(s2)+2には小数部桁数を指定する。

- (s2)+1で指定できる全桁数は、小数部桁数が0のときは全桁数(最大24)≥整数部桁数*1+1となる。0以外のときは全桁数(最大24)≥(整数部桁数*1+小数部桁数+2)となる。
  *1 (s1)で指定する32ビット浮動小数点型実数データの整数部桁数を示す。

- (s2)+2で指定できる小数部桁数は0～7桁。ただし、小数部桁数＜「全桁数-3」となるように設定する必要がある。

- 変換後の文字列データは、(d)以降のデバイス番号に格納される。
  - 符号は、単精度実数データが正のとき20H(スペース)、負のとき2DH(-)を格納。
  - 小数部桁数の範囲に単精度実数データの小数部が収まらない場合は、下位小数部が四捨五入される。

### 図
- 小数点形式のデータ構造図：
  - (s1)+1と(s1)の単精度実数データを元に、(s2)、(s2)+1、(s2)+2の指定に従い、符号と数値の各桁を分割して格納。
  - 符号は20Hまたは2DHで表現。
  - 文字列の最後に自動的に00Hが格納される。

- 具体例として、(s2)=0、(s2)+1=8、(s2)+2=2の設定で「-1.23456」という数値がどのように変換・格納されるかを示す図が2つあり、四捨五入の処理や2EH(.)の自動付加の有無を説明。

### 表
| 項目 | 内容 |
| :--- | :--- |
| (s2) | 表示形式指定（0:小数点形式、1:指数形式） |
| (s2)+1 | 全桁数（整数部＋小数部＋符号などを含む） |
| (s2)+2 | 小数部桁数（0～7） |
| 符号 | 正の数は20H(スペース)、負の数は2DH(-)を格納 |
| 文字列終端 | 00Hを自動的に格納 |
| 四捨五入 | 小数部桁数の範囲外は四捨五入される |
| 小数部桁数0以外の場合 | 指定された小数部桁数+1桁目に2EH(.)を自動格納。0の場合は格納しない。 |

</contents>