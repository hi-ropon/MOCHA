ファイル名: MELSEC_iQ-R_プログラミングマニュアル（CPUユニット用命令_汎用FUN_汎用FB編）_page566

<overview>
本ページは、DI（割込み禁止）命令およびDI（指定優先度以下の割込み禁止）命令の動作と割込み禁止区間について説明しています。ページ構成は以下の通りです。
- テキスト部分：DI命令の動作概要と割込み禁止区間の説明。
- 図（グラフ）部分：スキャン実行タイププログラムと割込みプログラムの時間軸に沿った割込み禁止区間の動作例を示すタイムチャートが3つ掲載されている。
- 表はなく、図とテキストで構成されている。
</overview>

<contents>
### テキスト
- DI（割込み禁止）命令、DI（指定優先度以下の割込み禁止）命令、およびEI命令実行時の割込み禁止区間について説明。
- DI（指定優先度以下の割込み禁止）命令を多重実行した場合の動作（現在禁止している割込み優先度より高い優先度の割込みを禁止する指定をした場合、または低い優先度の割込みを禁止する指定をした場合）について記述。
- 割込みプログラムでDI命令を実行した場合の動作も説明。
- DI（割込み禁止）命令のみを実行した場合の動作も記載。

### 図（タイムチャート）
1. **DI（指定優先度以下の割込み禁止）命令を多重実行した場合（高い優先度の割込み禁止指定）**
   - 横軸は時間t、縦軸はスキャン実行タイププログラム（A）。
   - EI（割込み許可）とDI（割込み禁止）命令の実行区間が示されている。
   - (1) 全ての優先度の割込み許可区間
   - (2) 優先度3～8の割込み禁止区間（優先度1,2の割込み許可区間）
   - (3) 優先度2～8の割込み禁止区間（優先度1の割込み許可区間）
   - DI命令の多重実行により、割込み禁止区間が優先度に応じて変化する様子を示す。

2. **割込みプログラムでDI命令を実行した場合**
   - 横軸は時間t、縦軸はスキャン実行タイププログラム（A）と割込みプログラム（B）。
   - 割込みプログラム内でDI命令（DI K2）が実行されると、割込み禁止区間が変化し、IRET命令で割込み禁止が解除される流れを示す。
   - (1) 全ての優先度の割込み許可区間
   - (2) 優先度2～8の割込み禁止区間（優先度1,2の割込み許可区間）
   - (3) 既に優先度2以下の割込みが禁止されているため、割込み禁止優先度は変更されない。

3. **DI（割込み禁止）命令のみ実行した場合**
   - 横軸は時間t、縦軸はスキャン実行タイププログラム（A）。
   - DI命令が実行されると、全ての優先度の割込みが禁止される。
   - (1) 全ての優先度の割込み許可区間
   - (2) 優先度1～8の割込み禁止区間（全ての割込み禁止区間）
   - (3) DI命令が割込み禁止として機能し、1回の命令実行で全ての優先度の割込みが禁止される。

### 用語説明
- **EI**：割込み許可命令
- **DI Kx**：指定優先度以下の割込み禁止命令（Kxは優先度レベル）
- **IRET**：割込みリターン命令
- **スキャン実行タイププログラム**：通常のプログラム実行区間
- **割込みプログラム**：割込み処理用プログラム

</contents>