ファイル名: MELSEC_iQ-R_プログラミングマニュアル（CPUユニット用命令_汎用FUN_汎用FB編）_page826

<overview>
本ページは「文字列の長さ検出」についての説明で構成されています。ページ全体は以下のセクションに分かれています。
- テキスト部分：LEN(P)命令の概要、使用上の注意、実行条件の説明
- 図部分：ラダー回路図、FBD/LDの命令ブロック図
- 表部分：命令の実行条件一覧、設定データの内容・範囲・データ型の説明、使用可能デバイスの一覧表
グラフは含まれていません。
</overview>

<contents>
### テキスト
#### 文字列の長さ検出 LEN(P)
指定した文字列の長さを検出する命令について説明しています。  
LEN命令はST（構造化テキスト）やFBD/LD（ファンクションブロック/ラダー）では対応しておらず、汎用ファンクションのOLENを使用する必要がある旨の注意書きがあります。

#### 実行条件
- LEN命令は立ち下がりエッジで実行される
- LENP命令は立ち上がりエッジで実行される

### 図
- ラダー図：LENP命令のラダー回路例が示されており、(s)と(d)のオペランドが入力されている。
- FBD/LD図：EN（入力）、ENO（出力）、s（文字列）、d（長さ格納先）を持つ命令ブロックの形状が示されている。

### 表
#### 設定データ（内容、範囲、データ型）
| オペランド | 内容 | 範囲 | データ型 | データ型(ラベル) |
| :--- | :--- | :--- | :--- | :--- |
| (s) | 文字列または文字列が格納されている先頭デバイス | なし | 文字列 | ANYSTRING_SINGLE |
| (d) | 検出した文字列の長さを格納するデバイス番号 | なし | 符号付きBIN16ビット | ANY16 |
| EN | 実行条件 | なし | ビット | BOOL |
| ENO | 実行結果 | なし | ビット | BOOL |

#### 使用可能デバイス
| オペランド | ビット | ワード | ダブルワード | 間接指定 | 定数 | その他 |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| (s) | 使用不可 | T, ST, C, D, W, SD, SW, FD, R, ZR, RDで使用可 | 使用不可 | 使用不可 | 使用不可 | 使用不可 |
| (d) | 使用可 | 使用可 | 使用不可 | 使用不可 | 使用可（K,H） | 使用不可 |

ビットデバイスはX, Y, M, L, SM, F, B, SB, FX, FYが対象。ワードデバイスはT, ST, C, D, W, SD, SW, FD, R, ZR, RDが対象。ダブルワードはLT, LST, LCが対象。間接指定はK, H定数が使用可能。

---

以上より、LEN(P)命令は指定した文字列の長さを検出し、結果を指定デバイスに格納する命令であり、使用可能なデバイスや実行条件が詳細に示されています。
</contents>