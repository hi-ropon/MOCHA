ファイル名: MELSEC_iQ-R_プログラミングマニュアル（CPUユニット用命令_汎用FUN_汎用FB編）_page734

<overview>
このページは、データ処理命令の一つであるソート命令（SORTD(_U)）の機能説明とエラーコード一覧で構成されています。ページ上部にテキスト説明と図解があり、ソートの動作原理や実行条件について詳細に記載されています。ページ下部にはエラーコードの表があり、エラーコードとその内容が整理されています。グラフはなく、テキストと表の構成です。
</overview>

<contents>
### テキスト
#### 機能
- (s1)から(n)点分のBIN16ビットデータを昇順または降順にソート（並び替え）する機能を説明しています。
- ソート順はSM703（ソート順）ビットの状態により変わり、OFF時は昇順、ON時は降順でソートされます。
- 図では、(s1)から4点のデータ（35、-10、500、-124）をSM703の状態に応じて昇順または降順に並べ替えた例を示しています。
- SORTD(_U)命令の実行には数スキャンが必要で、スキャン回数はソート完了までの最大実行回数を(s2)で指定された1回の実行で比較するデータ数で割った値（小数点以下切り上げ）となります。
- (s2)の値を大きくするとスキャン回数は減るがスキャンタイムは延びることが説明されています。
- 最大実行回数は(n)×(n-1)÷2で計算され、例としてn=100の場合は45回となり、これを(s2)=2で割ると23スキャンとなることが示されています。
- (d1)で指定されたデバイスは命令実行開始でOFF、ソート完了でONとなり、完了後はONのまま保持されるため必要に応じてOFFにする必要があります。
- (d2)で指定されたデバイスから2点は命令実行時にシステムが使用し、変更しないことが注意されています。変更するとエラー（コード3405H）が発生します。
- ソート実行中に(n)を変更した場合は変更後のデータ数でソートし、実行指令をOFFにするとソートを中断し、再度ONにすると最初からやり直します。
- 連続してソートを行う場合は、一度実行指令をOFFにしてから再度ONにする必要があります。

### 図
- (s1)から4点のデータをSM703のOFF/ON状態により昇順・降順にソートした例を示しています。
  - SM703:OFF → 昇順ソート（-124、-10、35、500）
  - SM703:ON → 降順ソート（500、35、-10、-124）

### 表
#### エラー
| エラーコード (SD0) | 内容 |
| :--- | :--- |
| 2821H | (s1)から(n)点分のデバイス範囲と(d2)から2点分のデバイス範囲が重複しているとき。 |
| 3405H | (s2)が0のとき。<br>2スキャン目以降で、システムで使用する(d2)の値が(n)以上の値であるとき。<br>2スキャン目以降で、システムで使用する(d2)の値が(d2)＜(d2)+1であるとき。 |

</contents>