ファイル名: MELSEC_iQ-R_プログラミングマニュアル（CPUユニット用命令_汎用FUN_汎用FB編）_page588

<overview>
このページは、ECALL(P)命令の機能説明に関する内容で構成されています。テキスト部分ではECALL(P)命令の概要と使用方法、注意点が説明されています。図部分にはメインルーチンプログラムとサブルーチンプログラムの関係を示すフローチャートがあり、命令の流れを視覚的に理解できるようになっています。表部分では、ファンクションデバイスごとの使用デバイスとデータサイズの対応が整理されています。最後に、具体例として指定されたデバイスの内容を示す命令例が記載されています。
</overview>

<contents>
### テキスト
#### 機能
- ECALL(P)命令は、指定したプログラムファイル名のポインタ(P)のサブルーチンプログラムを実行する命令です。
- 他のプログラムファイルのローカルポインタを使ったサブルーチンプログラムの呼び出しも可能です。
- ファイル名はプログラムメモリに格納されているプログラムファイルのみ指定可能で、拡張子(.PRG)は不要です。
- サブルーチンプログラムでファンクションデバイス(FX, FY, FD)を使う場合、(s1)～(s5)で対応するデバイスを指定します。
- FX, FYの処理単位はビット単位、FDの処理単位は4ワード単位です。
- データサイズが確保できない場合はエラーになります。

#### 注意点
- サブルーチンプログラム実行前に、ビットデータはFXに、ワードデータはFDに転送されます。
- 実行後はFY、FDの内容が対応デバイスに転送されます。
- ファンクションデバイスのデータサイズは使用命令により異なります。

### 図
- メインルーチンプログラム（ファイル名: MAIN）からECALL "ABC"(P)命令でサブルーチンプログラム（ファイル名: ABC）を呼び出す流れを示す。
- MAINのX10がONでECALLP命令が実行され、ABCのサブルーチンプログラムが開始される。
- ABC内ではFX0のビットデータ、FD1、FD2のワードデータを使い、最後にRET命令で戻る。

### 表
| ファンクションデバイス | 使用デバイス                     | データサイズ       |
|------------------------|--------------------------------|--------------------|
| FX, FY                 | ビットデバイス                 | 1点                |
|                        | ワードデバイスのビット指定時   | 1ビット             |
| FD                     | ビットデバイスの桁指定時       | 4ワード*2          |
|                        | ワードデバイス                 | 4ワード*3          |

*2 ビットデバイスの桁指定時、デバイス番号が16の倍数でなくてもエラーにならない  
*3 データサイズは命令により異なる

### 例
- 指定されたデバイスの内容例として、ECALL "A-LINE" P0 M0 D0 D30命令が示されている。
  1. M0を占有しFX0へ転送  
  2. D0～D3を占有しFD1へ転送  
  3. D30～D33を占有しFD2へ転送  
- ECALL(P)命令は(s1)～(s5)まで使用可能。

</contents>