ファイル名: MELSEC_iQ-R_プログラミングマニュアル（CPUユニット用命令_汎用FUN_汎用FB編）_page1180

<overview>
本ページは、通信プロトコルにおけるプロトコルキャンセルの動作について説明しています。構成はテキスト説明と、CPUユニットおよび外部機器間の通信状態を示すタイミングチャート（図）で構成されています。テキストはプロトコルキャンセルの動作条件を示し、図は送信待ち状態からキャンセル要求、キャンセル完了までの信号の流れを視覚的に表現しています。
</overview>

<contents>
### テキスト
- 各タイミングにおけるプロトコルキャンセルの動作について説明しています。
- 送信前にキャンセル要求があった場合の動作を対象としています。
- プロトコル実行状態が「T1:送信待ち」の場合の動作が記載されています。

### 図（タイミングチャート）
- CPUユニット内のSP.ECPRTCL命令、完了デバイス(d)、完了時の状態表示デバイス(d)+1の状態変化を示しています。
  - 完了デバイス(d)は異常完了時にONになります。
  - 完了時の状態表示デバイス(d)+1も同様に状態変化します。
- コネクション番号(s1)に対してプロトコルキャンセル指定が行われます。
- キャンセルの流れは以下の通りです。
  1. キャンセル要求が発生。
  2. キャンセル完了となる。
- 送信待機時間中にキャンセル要求が入り、送信パケットは中止されます。
- 中止された送信パケットは外部機器に送信されません。
- 次に受信やプロトコルがあっても実行されません。

この図は、プロトコルキャンセルが送信待ち状態で行われた場合の信号の流れと状態変化を示し、キャンセル処理の動作を理解しやすくしています。
</contents>