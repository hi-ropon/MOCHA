ファイル名: MELSEC_iQ-R_プログラミングマニュアル（CPUユニット用命令_汎用FUN_汎用FB編）_page579

<overview>
このページは、CALL(P)命令の機能説明に関する内容で構成されています。テキスト部分ではCALL(P)命令の概要、使用方法、注意点が説明されています。図部分にはメインルーチンプログラムとサブルーチンプログラムの関係を示す簡単なフローチャートと、CALL(P)命令の具体的な使用例を示すラダー図が掲載されています。表部分では、ファンクションデバイスの種類ごとの使用デバイスとデータサイズの対応がまとめられています。
</overview>

<contents>
### テキスト
#### CALL(P)命令の機能
CALL(P)命令を実行すると、ポインタ(P)で指定されたサブルーチンプログラムを実行します。CALL(P)命令は、同一プログラムファイル内のポインタ指定されたサブルーチンプログラムと、グローバルポインタで指定されたサブルーチンプログラムの両方を実行可能です。

サブルーチンプログラムでファンクションデバイス（FX、FY、FD）を使用する場合、(s1)～(s5)で対応するデバイスを指定します。これらの指定により、ビットデバイスやワードデバイスの種類が決まります。

CALL(P)命令では、(s1)～(s5)まで使用可能で、サブルーチンプログラムで使用するファンクションデバイス数とCALL(P)命令の引数数は同じにする必要があります。また、ファンクションデバイスとCALL(P)命令の引数の種類も一致させる必要があります。

CALL(P)命令で引数に指定されたデバイス番号は重複してはいけません。重複があると正常に演算できません。

CALL(P)命令で引数のデバイスにタイマやカウンタを使用した場合は、現在値のみが授受されます。

#### 注意事項
- サブルーチンプログラム実行前にビットデータの内容がFXに、ワードデータの内容がFDに転送されます。
- サブルーチンプログラム実行後はFY、FDの内容が対応するデバイスに転送されます。
- FX、FYのファンクションデバイスの処理単位はビット単位、FDの処理単位は4ワード単位です。データサイズ分確保できない場合はエラーとなります。

### 図
- メインルーチンプログラム（A）からサブルーチンプログラム（B）へCALL(P)命令で制御が移り、サブルーチンプログラム終了後にRET命令でメインに戻るフロー図。
- CALL(P)命令のラダー図例。X10入力でCALLP命令が実行され、P0、X0、D0、D100などの引数が指定されている。サブルーチンプログラム内でFEND、RET命令が使われている。
- 指定されたデバイスの内容例として、M0、D0～D3、D30～D33がそれぞれFX0、FD1、FD2に転送される様子を示すラダー図。

### 表
| ファンクションデバイス | 使用デバイス               | データサイズ       |
|------------------------|----------------------------|--------------------|
| FX, FY                 | ビットデバイス             | 1点                |
|                        | ワードデバイスのビット指定時 | 1ビット             |
| FD                     | ビットデバイスの桁指定時   | 4ワード*3          |
|                        | ワードデバイス             | 4ワード*3          |

*注釈*  
*2 ビットデバイスの桁指定時、(s1)～(s5)で指定されたデバイス番号が16の倍数でなくてもエラーになりません。  
*3 データサイズは使用する命令により異なります。

</contents>