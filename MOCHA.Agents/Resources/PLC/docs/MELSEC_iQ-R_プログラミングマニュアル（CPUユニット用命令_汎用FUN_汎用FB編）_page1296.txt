ファイル名: MELSEC_iQ-R_プログラミングマニュアル（CPUユニット用命令_汎用FUN_汎用FB編）_page1296

<overview>
本ページは「系切替」機能に関する説明で構成されています。テキスト部分では、SP.CONTSW命令の動作概要と系切替時の動作について記述されています。図部分には、A系とB系のプログラム実行・停止の流れと系切替のタイミングを示したタイムチャートが掲載されています。表はなく、文章と図による解説が中心です。
</overview>

<contents>
### テキスト
#### 機能概要
- SP.CONTSW命令は、スキャンのEND処理時に制御系と待機系を切り替える命令であり、制御系で実行する必要がある。待機系で実行した場合は無処理となる。
- 系切替時の動作は、A系がプログラム実行からENDを迎えた後に停止し、B系が待機系から制御系に切り替わってプログラムを実行開始する流れとなる。
- SP.CONTSW命令で系切替を行う場合、事前に制御系のSM1646（ユーザ系切替え許可）をONにする必要がある。
- DCONTSW命令で系切替禁止状態にしている場合は、待機系でECONTSW命令を実行し、系切替許可状態に戻す必要がある。
- (s)で指定した値は、系切替が正常完了した際に両系のSD1650（系切替え命令識別番号）に格納される。
- プログラム内に複数の系切替え命令があっても、SD1650を読み出すことでどの命令で系が切り替わったか確認可能。
- 同一スキャン内に複数の系切替え命令を実行した場合は、最初に実行した命令の引数のみ格納される。

### 図
- タイムチャートでA系とB系の動作を示す。
  - A系はプログラム実行中にSP.CONTSW命令を実行し、ENDに達するとプログラム停止に移行。
  - B系は待機系から制御系に切り替わり、プログラム停止からプログラム実行に移行し、ENDに達するまで動作。
  - 系切替はA系のEND処理時に行われ、制御系と待機系が入れ替わる様子が矢印で示されている。
</contents>