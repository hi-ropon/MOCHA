ファイル名: MELSEC_iQ-R_プログラミングマニュアル（CPUユニット用命令_汎用FUN_汎用FB編）_page678

<overview>
本ページは「ファイル操作命令」に関する説明で構成されています。ページ全体は以下のセクションに分かれています。
・テキスト部分：機能説明、注意事項の箇条書き
・表部分：エラーコードとその内容をまとめた表
グラフや図は含まれていません。
</overview>

<contents>
### テキスト
#### 機能
- 指定したドライブやフォルダ間でファイルやフォルダを移動する機能について説明。
- 移動先のフォルダが存在しない場合は自動作成される。
- SP.FMOVE命令実行中はSM753（ファイルアクセス中）がONとなり、SM753がON中はSP.FMOVE命令は実行不可（無処理）。
- 処理完了のビットデバイスは、スキャンのEND命令実行時に自動的にON/OFFされる。
- 異常完了時は異常完了ビットが処理完了ビットと同タイミングでON/OFFされる。
- 演算エラー検出時は処理完了・異常完了ビットはONしない。

#### 注意事項
- 割込みプログラム中での実行禁止。割込みプログラムで実行すると誤動作の原因となる。
- CPUユニットの状態をRUN→STOPに変更しても処理は継続される。
- 移動後のフォルダパスやファイル名は文字数制限を超えないように注意（破損やエラーの原因）。
- 上書きが発生すると命令完了まで時間が延びる場合がある。
- 上書き時は操作対象ファイルと同等サイズの空き容量を確保する必要がある。
- 処理途中で異常完了した場合、ファイルやフォルダが途中状態で残ることがある。
- 上書き発生時、ファイルサイズやファイル数が大きいと命令完了まで時間が長くなる。
- 操作中のファイルには他機能からアクセスしないこと（アクセス不可やエラーの原因）。
- 他機能からアクセスしているファイルやフォルダへの操作は禁止。

### 表
#### エラーコード（SD0）と内容

| エラーコード | 内容 |
|--------------|------|
| 3405H | ドライブ指定(s1)がSDメモリカード以外の場合。<br>ファイル名/フォルダ名文字列が読み出せない場合の詳細条件：<br>・ファイル名文字列が1文字以上指定されていない<br>・ファイル名文字列が254文字以上<br>・フォルダパス245文字以上<br>・フォルダパス11階層以上<br>・ファイル名文字列末尾に区切り文字不正<br>・ファイル名文字列末尾に半角ピリオド指定<br>・フォルダパス文字列末尾に区切り文字不正<br>・フォルダパス文字列末尾に半角スペースやピリオド指定<br>・ルートフォルダ直下のシステムフォルダ(SMELPRJ$)指定 |

- SP.FMOVE命令が異常完了した場合、完了ステータス(d1)+1で指定したデバイスにエラーコードが格納される。
- 演算エラーの場合はエラーコードは格納されない。
- エラーコードの詳細は687ページのファイル操作命令のエラーコード一覧を参照。

</contents>