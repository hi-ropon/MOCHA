ファイル名: MELSEC_iQ-R_プログラミングマニュアル（CPUユニット用命令_汎用FUN_汎用FB編）_page1289

<overview>
本ページは「機能」「注意事項」「エラー」の3つのセクションで構成されています。  
・「機能」セクションはテキストと表で構成され、指定ブロックの状態に応じた動作の説明が記載されています。  
・「注意事項」セクションはテキストのみで、ステップ起動命令に関する注意点が述べられています。  
・「エラー」セクションは表形式で、エラーコードとその内容が一覧で示されています。  
グラフや図は含まれていません。
</overview>

<contents>
### テキスト
#### 機能
指定ブロックの指定ステップを活性化させる機能について説明しています。  
指定ブロックの活性/非活性により動作が異なり、非活性の場合は命令時に活性化され処理が開始されます。すでに活性状態のステップはそのまま処理を継続し、新たに指定ステップが活性化されます。  
また、すでに活性中のステップに命令を実行した場合はNOP命令相当として処理を続行します。ただし、保持ステップの場合は保持状態を解除して通常の活性状態となり、動作出力や移行条件も実行されます。  
命令実行時に指定ステップのブロックがSFCブロックRUN中書込み中の場合もNOP命令相当として処理されます。  
イニシャルステップが複数ある場合は特定ステップを指定して活性化させることでイニシャルステップの選択スタートが可能です。  
ブロック指定なしの場合は、シーケンスプログラム中の命令はブロック0、SFCプログラムの動作出力内で命令を実行した場合は命令を実行したブロック（自ブロック）として扱います。  
プロセスCPU（二重化モード）の場合、バックアップモードの待機系で実行しても無処理となります。

#### 注意事項
・ステップ起動命令で並列分岐中のステップを指定する場合は、並列のすべてのステップを起動する必要があります。活性していない分岐回路があると並列結合が移行しません。  
・並列分岐中のステップに対してステップ終了命令を実行すると並列結合の条件が成立しません。  
・SFCプログラムは動作出力内でステップNo.に自ステップNo.を指定できません。指定するとエラーになります。

### 表
#### 指定ブロックの状態と動作

| 指定ブロックの状態 | 動作 |
| :--- | :--- |
| 非活性の場合 | 指定ブロックは命令時に活性となり、指定ステップから処理を開始する。SFC用情報デバイスのブロック起動終了ビットが設定されている場合、そのビットデバイスはOFF→ONとなる。 |
| すでに活性になっている場合 | すでに活性状態のステップはそのまま処理を継続し、新たに指定ステップが活性する。 |

#### エラーコード一覧

| エラーコード (SD0) | 内容 |
| :--- | :--- |
| 31A1H | 指定ブロックが存在しないとき。（SET/RST BL□¥S□） |
| 31A2H | ブロック指定時に指定ブロックNo.が指定可能な範囲外のとき。 |
| 31B1H | SFCプログラムが存在しない（スキャン実行タイプのSFCプログラムが存在しない）、またはSM321(SFCプログラムの起動/停止)をOFFに設定して命令を実行したとき。指定ステップが指定ブロック内に存在しないとき。（SET/RST BL□¥S□/S□） |
| 31B2H | 指定ステップNo.が指定可能なステップNo.の範囲外のとき。 |
| 31B5H | 動作出力内で指定ステップに自ステップを指定したとき。 |

</contents>