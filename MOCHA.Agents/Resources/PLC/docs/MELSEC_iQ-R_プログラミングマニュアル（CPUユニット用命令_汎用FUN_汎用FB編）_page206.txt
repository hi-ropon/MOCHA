ファイル名: MELSEC_iQ-R_プログラミングマニュアル（CPUユニット用命令_汎用FUN_汎用FB編）_page206

<overview>
このページは「5.7 終了命令 メインルーチンプログラム終了」についての説明で構成されています。ページ全体は以下のセクションに分かれています。
- テキスト部分：FEND命令の概要、機能説明、実行条件の説明
- 図部分：メインルーチンプログラム、サブルーチンプログラム、割込みプログラムの関係を示すフローチャート図が2つ掲載されている
- 表部分：エラーコードとその内容をまとめた表が1つ掲載されている
</overview>

<contents>
### テキスト
#### 5.7 終了命令 メインルーチンプログラム終了
- FEND命令は、プログラムファイル内でメインルーチンプログラム、サブルーチンプログラム、割込みプログラムを分割するときに使用する。
- 対応CPUはRnCPU、RnENCPU、RnPCPU（プロセス、二重化、一般、安全）、RnSFCPU（一般、安全）。
- ラダー言語では対応しておらず、FBD/LDも対応していない。
- 実行条件は常時実行。

##### 機能
- FEND命令はCJ命令などでシーケンスプログラムの演算を分岐させる場合や、メインルーチンプログラムをサブルーチンプログラムや割込みプログラムに分割する際に使用。
- FEND命令を実行するとCPUユニットは実行していたプログラムを終了する。
- FEND命令以降のシーケンスプログラムもエンジニアリングツールで回路表示可能。

### 図
- 左図はCJ命令を用いた場合のメインルーチンプログラム（A）、サブルーチンプログラム（B）、割込みプログラム（C）の関係を示す。
  - (1) CJ命令を実行しないときの演算
  - (2) CJ命令によるジャンプ
  - (3) CJ命令を実行したときの演算
- 右図はサブルーチンプログラム、割込みプログラムのある場合の構成を示し、CALL命令でP**プログラムを呼び出し、FEND命令で終了し、END命令でプログラム終了を示す。

### 表
#### エラーコード（SD0）
| エラーコード | 内容 |
| :--- | :--- |
| 3340H | FOR命令実行後、NEXT命令実行前にFEND命令を実行したとき。 |
| 3381H | CALL(P)命令、FCALL(P)命令、ECALL(P)命令、EFCALL(P)命令実行後、RET命令実行前にFEND命令を実行したとき。 |
| 33A1H | 割込みポインタ(I)による割込みプログラム中でIRET命令実行前にFEND命令を実行したとき。 |
</contents>