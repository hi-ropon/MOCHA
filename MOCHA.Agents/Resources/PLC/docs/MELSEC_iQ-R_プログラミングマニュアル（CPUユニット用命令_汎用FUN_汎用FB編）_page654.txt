ファイル名: MELSEC_iQ-R_プログラミングマニュアル（CPUユニット用命令_汎用FUN_汎用FB編）_page654

<overview>
本ページは、ファイル操作命令に関する説明で構成されています。ページ全体は主にテキスト部分と表部分で構成されており、テキスト部分では機能の概要や動作条件、注意点が記載されています。表部分では、実行/完了タイプやデータタイプ指定に応じた処理単位や設定範囲が詳細に示されています。グラフや図は含まれていません。
</overview>

<contents>
### テキスト
#### 機能概要
指定されたデータ数のデータを指定されたファイルに書き込みます。コントロールデータの実行/完了タイプにより、ファイルの書き込み形式を指定可能です。

#### 使用するCPUユニット
- RnCPU: R01CPU、R02CPU、R04CPU、R08CPU、R16CPU、R32CPU、R120CPU
- RnENCPU
- RnPCPU
- RnPSFCPU
- RnSFCU

それぞれのCPUユニットに対応したファームウェアバージョンや参照ページが示されています。

#### 動作条件・注意点
- 書き込み対象はSDメモリカードのみ。
- 処理完了(d2)のビットデバイスは、SP.FWRITE命令の処理完了を検出したスキャンのEND命令実行時に自動的にONし、次のスキャンのEND命令でOFFになる。
- SP.FWRITE命令が異常完了時は、異常完了(d2)+1のデバイスが処理完了(d2)のデバイスと同じタイミングでON/OFFする。
- SP.FWRITE命令実行中はSM753（ファイルアクセス中）がONになる。
- SM753がON中はSP.FWRITE命令は実行不可。実行した場合は無処理。
- 命令実行時に検出したエラーについては、処理完了(d2)、異常完了(d2)+1、およびSM753はONしない。
- 要求書込みデータ数(s3)+0、ファイル位置((d1)+4、(d1)+5)、および書込み結果データ数((d1)+2)の処理単位は、実行/完了タイプ(d1)+0およびデータタイプ指定(d1)+7の組合せにより指定。

### 表
#### 実行/完了タイプ(d1)+0、データタイプ指定(d1)+7に基づく処理単位および設定範囲

| 実行/完了タイプ(d1)+0 | データタイプ指定(d1)+7 | 処理単位および設定範囲 |
|-----------------------|------------------------|-------------------------|
| バイナリ書込み 0000H: BIN16ビットデータ | 0: ワード | 要求書込みデータ数(s3)+0: ワード(1～65535)<br>ファイル位置((d1)+4、(d1)+5): ワード(00000000H～7FFFFFFFH, FFFFFFFFH)<br>書込み結果データ数((d1)+2): ワード |
|                       | 1: 偶数バイト | 要求書込みデータ数: ワード(1～32767)<br>ファイル位置: バイト(00000000H～FFFFFFFFH)<br>書込み結果データ数: バイト |
|                       | 2: 実行/完了タイプで指定したデータ型の単位 | 要求書込みデータ数: ワード(1～65535)<br>ファイル位置: ワード(00000000H～7FFFFFFFH, FFFFFFFFH)<br>書込み結果データ数: ワード |
|                       | 3: 奇数バイト | 要求書込みデータ数: ワード(1～32767)<br>ファイル位置: バイト(00000000H～FFFFFFFFH)<br>書込み結果データ数: バイト |
| バイナリ書込み 0001H: BIN32ビットデータ | 0: ワード | 要求書込みデータ数: 指定不可<br>ファイル位置: 指定不可<br>書込み結果データ数: 指定不可 |
|                       | 1: 偶数バイト | 要求書込みデータ数: 指定不可<br>ファイル位置: 指定不可<br>書込み結果データ数: 指定不可 |
|                       | 2: 実行/完了タイプで指定したデータ型の単位 | 要求書込みデータ数: ダブルワード(1～32767)<br>ファイル位置: ダブルワード(00000000H～3FFFFFFFH, FFFFFFFFH)<br>書込み結果データ数: ダブルワード |
|                       | 3: 奇数バイト | 要求書込みデータ数: 指定不可<br>ファイル位置: 指定不可<br>書込み結果データ数: 指定不可 |

以上の表は、バイナリ書込みにおける16ビットデータおよび32ビットデータの処理単位や設定可能な範囲を示しています。
</contents>