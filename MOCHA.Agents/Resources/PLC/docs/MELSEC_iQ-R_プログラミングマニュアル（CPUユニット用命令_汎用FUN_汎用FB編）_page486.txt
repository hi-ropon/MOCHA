ファイル名: MELSEC_iQ-R_プログラミングマニュアル（CPUユニット用命令_汎用FUN_汎用FB編）_page486

<overview>
本ページは、SM705の変換桁数切換機能に関する説明で構成されています。ページ全体は主にテキスト説明と表、さらに図解によるデータのビット配置やASCIIコードの割り当てを示す構成です。テキスト部分では機能概要と設定方法の説明があり、表はSM705の状態別の設定方法をまとめています。図はASCIIコードのビット割り当てや具体的なデータ例を示し、データ変換のイメージを視覚的に理解できるようになっています。
</overview>

<contents>
### テキスト
#### 機能概要
- (s)で指定されたデバイス番号以降に格納されている10進アスキーデータをBCD8桁データに変換し、(d)で指定されたデバイス番号に格納する。
- SM705（変換桁数切換）の状態により、(s)に設定する10進アスキーデータの設定方法が異なる。

#### SM705の状態と(s)の設定方法
| SM705の状態 | (s)の設定方法 | 参照先 |
|-------------|---------------|---------|
| OFF         | 固定桁数(8桁)で設定 | 486ページ SM705(変換桁数切換)がOFFの場合の(s)の設定方法 |
| ON          | 任意の桁数(最大8桁)で設定 | 487ページ SM705(変換桁数切換)がONの場合の(s)の設定方法 |

※SM705に対応しているCPUユニットのファームウェアバージョンについては別途参照が必要。対応していないCPUユニットではON/OFFともに同様の動作。

#### SM705(変換桁数切換)がOFFの場合の(s)の設定方法
- (s)～(s)+3に10進アスキーデータを8桁固定で設定する。
- 各ビットのASCIIコードは以下の通り割り当てられる（例：ASCII10^7は千万の位のアスキーコード）。
- (s)～(s)+3で指定するアスキーデータは0～99999999の範囲内。
- (s)+4以降のデータは無視される。
- 各位に設定するアスキーコードは30H～39Hの範囲内。
- 20Hまたは00Hのコードは30Hとして処理。

### 表
#### SM705の状態別(s)の設定方法
| SM705の状態 | (s)の設定方法 | 参照先 |
|-------------|---------------|---------|
| OFF         | 固定桁数(8桁)で設定 | 486ページ |
| ON          | 任意桁数(最大8桁)で設定 | 487ページ |

### 図
#### ASCIIコードのビット割り当て（(s)～(s)+3）
- (s)～(s)+3の各デバイスにASCIIコードの上位4ビット(b15～b8)と下位4ビット(b7～b0)が格納される。
- 例として、(s)に87654321が指定された場合、各桁のASCIIコードが16進数で示され、BCD8桁データとして(d)と(d)+1に分割して格納される。
- (d)+1は千万～万の位、(d)は千～一の位のBCDデータを保持。

#### 例の説明
- (s)～(s)+3にそれぞれ37H(7), 38H(8), 35H(5), 36H(6), 33H(3), 34H(4), 31H(1), 32H(2)のASCIIコードが設定されている。
- これがBCD8桁の数値「87654321」として(d)+1と(d)に分割格納される様子を示す。

以上により、SM705のOFF状態での10進アスキーデータの設定方法と、ASCIIコードからBCDデータへの変換イメージが理解できる。
</contents>