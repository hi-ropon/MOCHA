ファイル名: MELSEC_iQ-R_プログラミングマニュアル（CPUユニット用命令_汎用FUN_汎用FB編）_page575

<overview>
本ページは、FOR～NEXT命令に関する説明で構成されています。ページ上部にテキストで機能の概要が記載されており、中段にFOR～NEXT命令のラダー図が3つ示されています。下部にはエラーコードの表があり、FOR～NEXT命令に関連するエラー内容がまとめられています。さらに、ポイントとして注意事項や補足説明がテキストとラダー図で示されています。全体的にテキスト説明とラダー図、表の3つのセクションで構成されています。
</overview>

<contents>
### テキスト
#### 機能
- FOR～NEXT命令間の処理を無条件に(n)回繰り返し実行し、NEXT命令の次ステップの処理を行う。
- (n)は1～32767で指定可能。-32768～0を指定した場合は(n)=1と同じ処理となる。
- FOR～NEXT命令間の処理を実行したくない場合は、CJ命令やSCJ命令でジャンプさせる。
- FOR命令のネスティングは最大16重まで可能。

### 図（ラダー図）
- X0、X1、X2の入力条件に対して、それぞれFOR命令（K5、K3、K100回）を設定し、NEXT命令で終了するラダー図が3つ示されている。
- 下部にはSM400を使ったFOR～NEXT命令の例があり、RST命令でZ0をリセットし、FOR命令でK10回繰り返し、INC命令でZ0をインクリメントし、NEXT命令で終了する構成。

### 表
#### エラーコード（SD0）
| エラーコード | 内容 |
| :--- | :--- |
| 3340H | FOR命令実行後、NEXT命令実行前にEND、FEND、GOEND命令を実行した場合。またはFOR～NEXT命令間にSTOP命令がある場合。 |
| 3341H | FOR命令実行前にNEXT命令を実行した場合。 |
| 3361H | FOR命令のネスティングが17重目を実行した場合。 |

### ポイント
- FOR～NEXT命令間の繰り返し実行中に途中終了させたい場合はBREAK命令を使用する（576ページ参照）。
- インデックス修飾されたプログラムのパルス演算を行う場合はEGP命令、EGF命令を使用。ただし動作出力側の立上り・立下り命令は使用不可。
- FOR～NEXT命令の外からFOR～NEXT命令内にJMP命令などで分岐はできない。
- わかりやすいプログラム作成のため、対応するFOR命令とNEXT命令は同一プログラムブロック内で使用すること。

</contents>