ファイル名: MELSEC_iQ-R_プログラミングマニュアル（CPUユニット用命令_汎用FUN_汎用FB編）_page1008

<overview>
本ページは、タイマ出力に関する機能説明のテキスト、設定データをまとめた表、及びタイマ動作のタイミングを示すグラフで構成されています。テキスト部分では、(d)で指定されたデバイスを用いた4種類のタイマ出力の動作概要と注意事項が説明されています。表部分には各設定データの内容と動作条件が整理されており、グラフ部分ではSTMR命令の指令に対するコイルや接点のON/OFFタイミングが視覚的に示されています。
</overview>

<contents>
### テキスト
#### 機能
(d)で指定されたデバイスから4点分を使用し、4種類のタイマ出力を行います。

- (s1)で指定されたタイマのコイルは、STMR命令の指令の立ち上りおよび立下りでONし、現在値の計測を開始します。
- タイマのコイルは、(s2)で指定された設定値まで計測し、タイムアップするとOFFします。
- タイマのコイルは、タイムアップ前にSTMR命令の指令がOFFするとONのまま保持され、計測は継続します。再度STMR命令がONすると現在値を0にして計測再開します。
- タイマの接点は、STMR命令の指令の立上りでONし、タイマのコイルが立下りした後、STMR命令の指令の立下りでOFFします。接点はシステム用のため使用不可です。

#### 注意事項
- RUN中の回路ブロック変更やPC書込み範囲内にSTMR命令がある場合、STMR命令が動作します。
- 詳細は「MELSEC iQ-R CPUユニットユーザーズマニュアル（応用編）」を参照してください。

#### エラー
- 演算エラーはありません。

### 表
#### 設定データ

| 設定データ | 内容 |
| :--- | :--- |
| (d)+0 | オフディレイタイマ出力：STMR命令の指令の立上りでONし、指令の立下り後(s2)で指定された時間経過するとOFF |
| (d)+1 | オフ後ワンショットタイマ出力：STMR命令の指令の立下りでONし、(s2)で指定された時間経過するとOFF |
| (d)+2 | オン後ワンショットタイマ出力：STMR命令の指令の立上りでONし、(s2)で指定された時間経過、またはSTMR命令の指令がOFFするとOFF |
| (d)+3 | オンディレイ＋オフディレイタイマ出力：タイマコイルの立下りでONし、STMR命令の指令の立下り後(s2)で指定された時間経過するとOFF |

- (s2)の設定値は0～32767で指定可能。範囲外は無処理。
- (d)で指定されたタイマはOUT命令を使用しないこと。STMR命令とOUT命令で同一タイマデバイスまたはタイマ型ラベルを使うと正常動作しない。
- (d)で指定されたタイマの計測単位は低速タイマと同じ。

### グラフ
- 横軸は時間軸、縦軸にSTMR命令の指令(1)、コイル(2)、接点(3)、および(d)+0～(d)+3の各タイマ出力の状態を示す。
- 矢印と陰影でON/OFFのタイミングと持続時間を表現。
- (1)のSTMR命令の立上り・立下りに連動して、各タイマ出力のON/OFFが変化する様子が視覚的に示されている。
- (4)は(s2)で指定された設定値の時間を示し、タイマのON持続時間の基準となっている。

以上より、STMR命令に基づく4種類のタイマ出力の動作原理と設定方法、及びタイミング関係が理解できる内容となっています。
</contents>