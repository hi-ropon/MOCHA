ファイル名: MELSEC_iQ-R_プログラミングマニュアル（CPUユニット用命令_汎用FUN_汎用FB編）_page1158

<overview>
このページは、内蔵Ethernet機能用命令の「オープン/クローズ処理命令」に関する説明で構成されています。ページ全体は以下のセクションで構成されています。
- テキスト部分：機能説明、エラー説明、ポイント解説
- 図部分：SP.SOCCLOSE命令の実行タイミングを示すシーケンス図
- 表部分：エラーコードとその内容を示す表
</overview>

<contents>
### テキスト
#### 機能
- (s1)で指定したコネクションに対してクローズ処理（コネクションの切断）を行う。オープン処理で使用する設定値は(s2)+0で選択する。
- SP.SOCCLOSE命令の実行および正常/異常完了は、設定データで指定した完了デバイス(d)、完了時の状態表示デバイス(d)+1で確認可能。
- 完了デバイス(d)は、SP.SOCCLOSE命令が完了したスキャンのEND処理でONし、次のEND処理でOFFになる。
- 完了時の状態表示デバイス(d)+1は、SP.SOCCLOSE命令の完了状態によりON/OFFが切り替わる。正常完了時はOFFのまま変化しない。異常完了時は完了スキャンのEND処理でONし、次のEND処理でOFFになる。
- SP.SOCCLOSE命令の実行タイミングは図の通り。

#### エラー
- エラーコード「3405H」：(s1)で指定するコネクション番号が1～16以外の場合に発生。
- 異常完了時は、完了時の状態表示デバイス(d)+1がONになり、完了ステータス(s2)+1にエラーコードが格納される。
- エラーコードの詳細は「MELSEC iQ-R Ethernetユーザーズマニュアル（応用編）」を参照。

#### Point
- TCP Passive方式で、SP.SOCCLOSE命令をオープン待ち状態のコネクションに指定した場合、SP.SOCOPEN命令、SP.SOCCLOSE命令ともに正常完了となり、コネクションはクローズされる。

### 図
- シーケンススキャンのタイムライン上に、SP.SOCCLOSE命令の実行から完了デバイス(d)および完了時の状態表示デバイス(d)+1のON/OFF変化を示す。
- 命令実行後、コネクションクローズ処理が行われ、正常完了時は完了デバイス(d)と状態表示デバイス(d)+1がONになり、1スキャン後にOFFに戻る。
- 異常完了時は状態表示デバイス(d)+1がONのまま保持される。

### 表
| エラーコード(SD0) | 内容                                   |
|-------------------|--------------------------------------|
| 3405H             | (s1)で指定するコネクション番号が1～16以外のとき。 |

</contents>