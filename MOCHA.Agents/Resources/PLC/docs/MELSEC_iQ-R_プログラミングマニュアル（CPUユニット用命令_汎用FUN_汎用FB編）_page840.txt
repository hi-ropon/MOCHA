ファイル名: MELSEC_iQ-R_プログラミングマニュアル（CPUユニット用命令_汎用FUN_汎用FB編）_page840

<overview>
本ページは「文字列処理」に関する説明で構成されており、主に以下の3つのセクションから成ります。
1. テキスト部分：文字列データの挿入機能の説明と挿入後の文字列の扱いに関する注意点。
2. 図部分：文字列データの挿入処理の具体例を示した図解。
3. 表部分：エラーコードとその内容をまとめた表。
</overview>

<contents>
### テキスト
#### 機能
(s1)で指定された文字列データを、(d)で指定された文字列データの先頭から(s2)文字目（挿入位置）に挿入する機能について説明しています。

- (s1)の文字列データを(d)の文字列データの指定位置に挿入し、3文字目以降の文字列データを5文字分右にシフトして「01234」を挿入する例が示されています。
- 挿入後の文字列長(s1)+(d)が偶数の場合は、文字列の最後の次のデバイス（1ワード）にNULLコード（00H）を格納します。
- 挿入後の文字列長が奇数の場合は、文字列の最後のデバイスの上位8ビットにNULLコード（00H）を格納します。
- (s2)に(d)の文字数+1を指定した場合は、(d)の文字列列の最後に(s1)の文字列列を結合します。

#### エラー
エラーコード（SD0）とその内容が表形式で示されています。

| エラーコード (SD0) | 内容 |
|--------------------|------|
| 2820H | (s1)で指定のデバイス以降、デバイス/ラベルメモリの各設定エリアにNULLコード(00H)が無いとき。<br>(d)で指定のデバイス以降、同様にNULLコードが無いとき。 |
| 2821H | 文字列(s1)と文字列(d)のデバイスが一部でも重複しているとき。<br>挿入後の文字列(s1)+(d)が、(s1)の文字列格納デバイスと重複しているとき。 |
| 3405H | (s1)で指定した文字列の文字数が16383文字を超えているとき。<br>(s2)で指定可能な範囲外のデータを設定したとき。<br>・指定した値が文字列(d)の文字数+1を超えている<br>・指定した値が1≦(s2)≦16383の範囲外<br>(d)で指定した文字列の文字数が16383文字を超えているとき。 |
| 3406H | 挿入後の文字列(s1)+(d)が出力可能な範囲外のデータとなったとき。<br>・挿入後の文字列の文字数が16383文字を超えている<br>・挿入後の文字列が指定デバイス/ラベルメモリの各設定エリアを超えている |

### 図
- 左側の図は、(s1)で指定された3ワードの文字列データ（"31H(1)", "30H(0)"など）と、(d)で指定された文字列データの先頭から3文字目（s2=3）に挿入する例を示しています。
- 右側の図は、挿入後の文字列データの状態を示し、(d)の元の文字列データの3文字目以降が5文字分右にシフトされ、(s1)の文字列データが挿入されていることがわかります。
- 挿入された文字列データは(d)+1から(d)+7までのワードに格納され、挿入前の(d)+5以降の文字列データは上書きされます。

</contents>