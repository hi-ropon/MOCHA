ファイル名: MELSEC_iQ-R_プログラミングマニュアル（CPUユニット用命令_汎用FUN_汎用FB編）_page1201

<overview>
本ページは「FTPクライアントファイル取得」命令（SP.FTPGET）に関する説明で構成されています。ページ全体は以下のセクションで構成されています。
- テキスト部分：命令の概要、使用可能CPUユニット、使用条件、注意事項の説明。
- 図部分：ラダー回路、ST言語、FBD/LDの命令ブロックの構成図。
- 表部分：実行条件の説明表、設定データの詳細表（オペランドごとの内容、範囲、データ型、ラベル名）。
グラフは含まれていません。
</overview>

<contents>
### テキスト
#### FTPクライアントファイル取得（SP.FTPGET）
- 対応CPUユニットはR00CPU、R01CPU、R02CPUで、バージョンによる制約はありません。
- RnCPU（R00CPU、R01CPU、R02CPUを除く）、RnENCPUはファームウェアバージョン"22"以降で使用可能。エンジニアリングツールはバージョン"1.025B"以降が必要。
- RnPCPUはファームウェアバージョン"13"以降で使用可能。エンジニアリングツールはバージョン"1.040S"以降が必要。
- (s2)でFTPサーバのファイル名を指定し、(s3)でCPUユニットのフォルダパスに取得する。
- FTPサーバを(s1)で指定することも可能。
- ファイル転送機能用命令のコントロールデータでFTPサーバを指定する場合はCPUユニットのバージョン確認が必要。

### 図
- ラダー回路：命令ブロックの入力(U, s1, s2, s3, d)と出力が示されている。
- ST言語：ENO:=SP_FTPGET(EN,U,s1,s2,s3,d); の形式で記述。
- FBD/LD：命令ブロックのEN、ENO、U、d、s1、s2、s3の入出力端子を示す。

### 表
#### 実行条件
| 命令       | 実行条件 |
|------------|----------|
| SP.FTPGET  | 立ち上がりエッジ（↑） |

#### 設定データ（内容、範囲、データ型）
| オペランド | 内容                                         | 範囲               | データ型         | データ型(ラベル)         |
|------------|----------------------------------------------|--------------------|------------------|--------------------------|
| (U)        | ダミー                                       | —                  | 文字列           | ANYSTRING_SINGLE         |
| (s1)       | コントロールデータを格納する先頭デバイス     | コントロールデータ参照 | ワード           | ANY16_ARRAY (要素数4または172) |
| (s2)       | FTPサーバに格納しているファイル名（転送元）  | —                  | Unicode文字列    | ANYSTRING_DOUBLE         |
| (s3)       | CPUユニットのフォルダパス（転送先）          | —                  | Unicode文字列    | ANYSTRING_DOUBLE         |
| (d)        | 命令完了にて1スキャンONするデバイス。異常完了時は(d)+1もON | —                  | ビット             | ANYBIT_ARRAY (要素数2)    |
| EN         | 実行条件                                     | —                  | ビット             | BOOL                     |
| ENO        | 実行結果                                     | —                  | ビット             | BOOL                     |

#### 注釈
- Unicode文字列またはUnicode文字列が格納されている先頭デバイスを指定。
- データ型はUnicode文字列だが、半角英数字、記号、カナ文字、全角文字（シフトJISコード）のみ使用可能。サポート外文字は「_」として扱う。
- コントロールデータのFTPサーバ指定有無により必要な配列要素数が変わる。
  - (s1)+0のビット15が0の場合：要素数4
  - (s1)+0のビット15が1の場合：要素数172

</contents>